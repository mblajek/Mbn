/* Mbn v1.53.0 / 04.04.2023 | https://mbn.li | Copyright (c) 2016-2023 Mikołaj Błajek | https://mbn.li/LICENSE */
var Mbn=function(){var ta={invalid_argument:"invalid argument: %v%",invalid_format:"invalid format: %v%",limit_exceeded:"value exceeded %v% digits limit",calc:{undefined:"undefined: %v%",unexpected:"unexpected: %v%"},cmp:{negative_diff:"negative maximal difference: %v%"},def:{undefined:"undefined constant: %v%",already_set:"constant already set: %v% = %w%",invalid_name:"invalid name for constant: %v%"},div:{zero_divisor:"division by zero"},extend:{invalid_precision:"invalid precision (non-negative integer): %v%",
invalid_separator:"invalid separator (dot, comma): %v%",invalid_truncation:"invalid truncation (bool): %v%",invalid_evaluating:"invalid evaluating (bool, null): %v%",invalid_formatting:"invalid formatting (bool): %v%",invalid_limit:"invalid digit limit (positive int): %v%"},fact:{invalid_value:"factorial of invalid value (non-negative integer): %v%"},format:{_:"extend"},pow:{unsupported_exponent:"only integer exponents supported: %v%"},reduce:{invalid_function:"invalid function name: %v%",no_array:"no array given",
invalid_argument_count:"two arguments can be used only with two-argument functions",different_lengths:"arrays have different lengths: %v%, %w%",different_keys:"arrays have different keys: [%v%], [%w%]"},split:{invalid_part_count:"only positive integer number of parts supported: %v%",zero_part_sum:"cannot split value when sum of parts is zero"},sqrt:{negative_value:"square root of negative value: %v%"}},ha=null,w=function(p,l){return ta.hasOwnProperty.call(p,l)},ua=function(p,l){if(p instanceof Array){var A=
[],v;if(void 0===l||!0===l)for(v=0;v<p.length;v++)A.push(ua(p[v],!1));else A.push("..");return"["+A.join(",")+"]"}return"string"===typeof p?'"'+p+'"':String(p)},q=function(p,l,A){var v={},t;if(1!==arguments.length){if("object"!==typeof l||!0!==A)l={v:l};for(t in l)if(w(l,t)){var u=ua(l[t]);v[t]=20<u.length?u.slice(0,18)+"..":u}}this.errorKey="mbn."+p;this.errorValues=v;u=null;if("function"===typeof ha)try{u=ha(this.errorKey,v)}catch(va){}if("string"!==typeof u){var z=p.split("."),B=z.length;u="Mbn";
1<B&&(u+="."+z[0]);var D=ta;for(t=0;t<B;t++){var C=D[z[t]];"object"===typeof C&&w(C,"_")&&(C=D[C._]);D=C}u+=" error: "+D}for(t in v)w(v,t)&&(u=u.replace("%"+t+"%",v[t]));this.message=u};q.prototype.toString=function(){return this.message};q.translate=function(p){ha=p};var wa=function(p,l,A,v,t,u,z,B){if(w(p,"MbnP")&&(l=p.MbnP,"number"!==typeof l||0>l||!isFinite(l)||Math.round(l)!==l))throw new q(B+"invalid_precision",l);if(w(p,"MbnS")&&(A=p.MbnS,"."!==A&&","!==A))throw new q(B+"invalid_separator",
A);if(w(p,"MbnT")&&(v=p.MbnT,!0!==v&&!1!==v))throw new q(B+"invalid_truncation",v);if(w(p,"MbnE")&&(t=p.MbnE,!0!==t&&!1!==t&&null!==t))throw new q(B+"invalid_evaluating",t);if(w(p,"MbnF")&&(u=p.MbnF,!0!==u&&!1!==u))throw new q(B+"invalid_formatting",u);if(w(p,"MbnL")&&(z=p.MbnL,"number"!==typeof z||0>=z||!isFinite(z)||Math.round(z)!==z))throw new q(B+"invalid_limit",z);return{MbnV:"1.53.0",MbnP:l,MbnS:A,MbnT:v,MbnE:t,MbnF:u,MbnL:z}},Fa=function(p){"object"!==typeof p&&(p=void 0!==p?{MbnP:p}:{});p=
wa(p,2,".",!1,null,!1,1E3,"extend.");for(var l=p.MbnP,A=p.MbnS,v=p.MbnT,t=p.MbnE,u=p.MbnF,z=p.MbnL,B=[0];B.length<=l;)B.push(0);var D=function(a){for(var c=a._d,b=c.length-1,d=b,e,f;0<=d;){for(e=c[d];0>e;)e+=10,c[d-1]--;f=e%10;e=(e-f)/10;c[d]=f;0!==e?0!==d?c[--d]+=e:(c.unshift(e),b++):d--}for(;b>l&&0===c[0];)c.shift(),b--;for(;b<l;)c.unshift(0),b++;if(b===l){for(d=0;d<=b&&0===c[d];d++);a._s*=d<=b?1:0}else if(b-l>z)throw new q("limit_exceeded",z);},C=function(a){var c=a._d,b=c.length;2>b&&(c.unshift(0),
b++);5<=c.pop()&&c[b-2]++;D(a)},va=/^\s*(=)?[\s=]*([-+])?\s*((?:[\s\S]*\S)?)/,ia=function(a,c,b,d,e){var f=a,k=a._d.length-l;if(c<l){var h=x(a);f=h._d.length;c<l-1&&(h._d=h._d.slice(0,f-l+c+1));C(h);f=h._d.length;f-c>k&&(h._d=h._d.slice(f-c-k));f=h}h=f._d.slice(0,k);if(e){var g=h.length;for(e=0;3*e<g-3;e++)h.splice(-3-4*e,0," ")}k=f._d.slice(k);if(c>l&&!d)for(e=0;e<c-l;e++)k.push(0);if(d){for(e=k.length-1;0<=e&&0===k[e];e--);k=k.slice(0,e+1)}a=(0>a._s?"-":"")+h.join("");0<k.length&&(a+=b+k.join(""));
return a},ja=function(a,c,b){c._s=0;c._d=B.slice();return c},G=ja,m=function(a,c){if(!(this instanceof m))return new m(a,c);G(a,this,c)},E=m(0),M=w(Object,"setPrototypeOf")?function(a){return a?ja(0,a):Object.setPrototypeOf({_s:0,_d:B.slice()},E)}:function(a){return a?ja(0,a):{__proto__:E,_s:0,_d:E._d.slice()}},N=function(a,c){var b=M(c);if(0!==a){var d=Math.abs(a);b._s=a/d;for(b._d[0]=d%10;10<=d;)d=(d-b._d[0])/10,b._d.unshift(d%10)}return b},O=N(1),Q=function(a,c){var b=M(c);if(1E9>Math.abs(a)&&
a===Math.round(a))return N(a,b);b._d=[];b._s=1;var d=a;if(!isFinite(d)){if(isNaN(d))throw new q("invalid_argument",d);throw new q("limit_exceeded",z);}0>d&&(d=-d,b._s=-1);var e=Math.floor(d);d-=e;do{var f=Math.round(e%10);e=Math.round((e-f)/10);b._d.unshift(f)}while(0<e);for(e=0;e<=l;e++)d*=10,f=Math.floor(d),f=10===f?9:f,b._d.push(f),d-=f;C(b);return b},x=function(a,c){var b=M(c);b._s=a._s;b._d=a._d.slice();return b},ka=function(a,c,b){c=M(c);if(-15>a.length){var d=a.replace(",","."),e=Number(d);
if(isFinite(e)&&d===String(a))return Q(e,c)}c._d=[];c._s=1;a:{d=a.match(va);e=d[3];"-"===d[2]&&(c._s=-1);var f=(e.indexOf(".")+1||e.indexOf(",")+1)-1,k=e.length,h=k;-1===f?f=k:h=f+1;var g=Math.max(h+l,k),n,r=0;for(n=0;n<=g;n++){var H=n<k?e.charCodeAt(n)-48:0;if(0<=H&&9>=H)n<=h+l&&c._d.push(H);else if(n===f&&1!==k||-16===H&&n>r&&n+1<f)-16===H&&(r=n+1);else{if(!0===b||b instanceof Object||!1!==b&&(!0===t||null===t&&"="===d[1])){c.set(xa(a,b,null));break a}throw new q("invalid_format",a);}}C(c)}return c};
G=function(a,c,b){c=M(c);switch(typeof a){case "undefined":case "boolean":return N(Number(a||!1),c);case "number":return Q(a,c);case "bigint":case "object":c=c||M();if(a instanceof m)a=x(a,c);else{if(a&&a.toString===Array.prototype.toString)throw new q("invalid_argument",a);a=ka(null!==a?String(a):"0",c,b)}return a;case "string":return ka(a,c,b);default:throw new q("invalid_argument",a);}};m.prop=function(){return{MbnV:"1.53.0",MbnP:l,MbnS:A,MbnT:v,MbnE:t,MbnF:u,MbnL:z}};m.prototype.toString=function(){return ia(this,
l,A,v,u)};m.prototype.format=function(a){"object"!==typeof a&&(a={MbnF:0===arguments.length?!0:a});a=wa(a,l,A,v,t,u,z,"format.");return ia(this,a.MbnP,a.MbnS,a.MbnT,a.MbnF)};m.prototype.toNumber=function(){return Number(ia(this,l,"."))};var Y=function(a,c){for(var b=[c[0]],d=1;d<c.length;d++){var e=c[d];b.push(e instanceof m?e:G(e))}return a.apply(null,b)},y=function(a,c,b){return x(Y(a,b),!0===c?b[0]:null)},Z=function(a,c){a._d=c._d.slice();a._s=c._s},I=function(a,c,b){if(0===b._s){if(a._s!==c._s)return a._s>
c._s?1:-1;if(0===a._s)return 0;b=c._d.length;var d=a._d.length-b;if(0!==d)return 0<d?a._s:-a._s;for(d=0;d<b;d++)if(a._d[d]!==c._d[d])return a._d[d]>c._d[d]?a._s:-a._s;return 0}if(-1===b._s)throw new q("cmp.negative_diff",b);return 1!==I(R(F(a,c)),b,E)?0:I(a,c,E)},Ga=function(a,c,b){return 0===I(a,c,b)},aa=function(a){for(var c=a._d.length-l;c<a._d.length;c++)if(0!==a._d[c])return!1;return!0},Ha=function(a,c){return c},S=function(a,c){var b=x(c);if(0!==a._s)if(0===c._s)Z(b,a);else if(c._s===a._s){var d=
a._d.length-c._d.length;0>d?(c=a,d=-d):Z(b,a);for(var e=0;e<b._d.length;e++)e>=d&&(b._d[e]+=c._d[e-d]);D(b)}else b._s=-b._s,b=F(b,a),b._s=-b._s;return b},F=function(a,c){var b=x(c);if(0===a._s)b._s=-b._s;else if(0===c._s)Z(b,a);else if(c._s===a._s){var d=a._d.length-c._d.length,e=I(a,c,E)*a._s;if(0===e)b=N(0);else{-1===e?(c=a,d=-d):Z(b,a);for(var f=0;f<b._d.length;f++)f>=d&&(b._d[f]-=c._d[f-d]);b._s=e*a._s;D(b)}}else b._s=-b._s,b=S(b,a);return b},J=function(a,c){var b=x(c);b._d=[];for(var d=0;d<a._d.length;d++)for(var e=
0;e<c._d.length;e++)b._d[d+e]=a._d[d]*c._d[e]+(b._d[d+e]||0);b._s=a._s*c._s;D(b);1<=l&&(1<l&&(b._d=b._d.slice(0,1-l)),C(b));return b},P=function(a,c){if(0===c._s)throw new q("div.zero_divisor");if(0===a._s)return x(a);for(var b=a._d.slice(),d=c._d.slice(),e=0,f=[0];0===d[0];)d.shift();for(;0===b[0];)b.shift();for(var k=l+1;d.length<b.length;)d.push(0),k++;var h,g,n;do{for(;0===b[(g=b.length)-1]+d[(n=d.length)-1];)b.pop(),d.pop();var r=g>=n;if(g===n)for(h=0;h<g;h++)if(b[h]!==d[h]){r=b[h]>d[h];break}if(r)for(f[e]++,
g-=n,h=n-1;0<=h;h--)b[h+g]<d[h]?(b[h+g-1]--,b[h+g]+=10-d[h]):b[h+g]-=d[h];else b.push(0),e++,f[e]=0;for(;0===b[0];)b.shift()}while(0!==b.length&&e<=k);for(;e<=k;)f[++e]=0;f.pop();b=x(c);b._s*=a._s;b._d=f;C(b);return b},ya=function(a,c){var b=R(c),d=F(a,J(la(P(a,b)),b));-1===d._s*a._s&&(d=F(b,R(d)),d._s=a._s);return d},ba=function(a){a=x(a);if(0!==l){for(var c=0,b=a._d.length-l;b<a._d.length;b++)c+=a._d[b],a._d[b]=0;-1===a._s&&0<c&&a._d[a._d.length-l-1]++;D(a)}return a},za=function(a){a=x(a);if(0!==
l){var c=a._d.length-l;for(a._d[c-1]+=5<=a._d[c]?1:0;c<a._d.length;)a._d[c++]=0;D(a)}return a},R=function(a){a=x(a);a._s*=a._s;return a},ca=function(a){a=x(a);a._s=-a._s;return a},da=function(a){return P(O,a)},ma=function(a){return ca(ba(ca(a)))},la=function(a){return 1===a._s?ba(a):ma(a)},Aa=function(a,c){return x(-1===I(a,c,E)?a:c)},na=function(a,c){return x(1===I(a,c,E)?a:c)},Ba=function(a){var c=J(a,Q(100)),b=x(c);if(-1===b._s)throw new q("sqrt.negative_value",a);if(1===b._s){a=N(2);var d=E,e=
0;do{e+=.01;var f=d;d=F(b,P(S(b,P(c,b)),a));b=F(b,d);e+=-1===d._s*f._s?1:0}while(0!==d._s&&4>e);C(b)}return b},Ca=function(a){return N(a._s)},ea=function(a,c){var b=x(c);if(!aa(b))throw new q("pow.unsupported_exponent",b);var d=b._s;b._s*=b._s;b=b.toNumber();var e=x(a);-1===d&&-1===I(R(e),O,E)&&(e=da(e),d=-d);for(var f=0,k=0,h=O;!aa(e);)e._d.push(0),D(e),f++;for(;;){1===b%2&&(h=J(h,e),k+=f);b=Math.floor(b/2);if(0===b)break;e=J(e,e);f*=2}1<=k&&(1<k&&(h._d=h._d.slice(0,1-k)),C(h));-1===d&&(h=da(h));
return h},Da=function(a){if(!aa(a)||-1===a._s)throw new q("fact.invalid_value",a);var c=F(a,O);for(a=na(a,O);1===c._s;)a=J(a,c),c=F(c,O);return a};m.prototype.set=function(a){return y(Ha,!0,[this,a])};m.prototype.cmp=function(a,c){return Y(I,[this,a,c])};m.prototype.eq=function(a,c){return Y(Ga,[this,a,c])};m.prototype.isInt=function(){return Y(aa,[this])};m.prototype.add=function(a,c){return y(S,c,[this,a])};m.prototype.sub=function(a,c){return y(F,c,[this,a])};m.prototype.mul=function(a,c){return y(J,
c,[this,a])};m.prototype.div=function(a,c){return y(P,c,[this,a])};m.prototype.mod=function(a,c){return y(ya,c,[this,a])};m.prototype.floor=function(a){return y(ba,a,[this])};m.prototype.round=function(a){return y(za,a,[this])};m.prototype.abs=function(a){return y(R,a,[this])};m.prototype.inva=function(a){return y(ca,a,[this])};m.prototype.invm=function(a){return y(da,a,[this])};m.prototype.ceil=function(a){return y(ma,a,[this])};m.prototype.intp=function(a){return y(la,a,[this])};m.prototype.min=
function(a,c){return y(Aa,c,[this,a])};m.prototype.max=function(a,c){return y(na,c,[this,a])};m.prototype.sqrt=function(a){return y(Ba,a,[this])};m.prototype.sgn=function(a){return y(Ca,a,[this])};m.prototype.pow=function(a,c){return y(ea,c,[this,a])};m.prototype.fact=function(a){return y(Da,a,[this])};m.prototype.split=function(a){var c=[],b;void 0===a&&(a=2);if(a instanceof Array){var d=ea(Q(10),Q(l));var e=M();var f=a.length;var k=[!1,!1,!1];for(b=0;b<f;b++){var h=J(G(a[b]),d);k[h._s+1]=!0;e=S(e,
h);c.push([b,h])}k[0]&&k[2]&&c.sort(function(n,r){return e._s*I(n[1],r[1],E)})}else{e=G(a);if(!e.isInt())throw new q("split.invalid_part_count",a);f=e.toNumber();for(b=0;b<f;b++)c.push([b,O])}if(0>=f)throw new q("split.invalid_part_count",f);if(0===e._s)throw new q("split.zero_part_sum");a=x(this);d=[];d.length=f;for(b=0;b<f;b++)if(h=c[b][0],k=c[b][1],0===k._s)d[h]=k;else{var g=P(J(a,k),e);e=F(e,k);a=F(a,g);d[h]=g}return d};var Ea={set:S,abs:R,inva:ca,invm:da,ceil:ma,floor:ba,sqrt:Ba,round:za,sgn:Ca,
intp:la,fact:Da,min:Aa,max:na,add:S,sub:F,mul:J,div:P,mod:ya,pow:ea};m.reduce=function(a,c,b){if(!w(Ea,a))throw new q("reduce.invalid_function",a);var d=!1,e=Ea[a];if(!(c instanceof Array)){if(!(b instanceof Array))throw new q("reduce.no_array");d=b;b=c;c=d}var f=c.length;var k="set"===a?0:e.length;var h=3===arguments.length?b instanceof Array?2:1:0;if(2!==k&&0!==h)throw new q("reduce.invalid_argument_count");if(2===k&&0===h){var g=G(f?c[0]:0);for(k=1;k<f;k++)g=e(g,G(c[k]))}else{g=[];if(2===h&&f!==
b.length)throw new q("reduce.different_lengths",{v:f,w:b.length},!0);var n=k&&1===h?G(b):E;for(k=0;k<f;k++){var r=G(c[k]),H=2===h?G(b[k]):n;g.push(d?e(H,r):e(r,H))}}return g};var T={PI:"3.1415926535897932384626433832795028841972",E:"2.7182818284590452353602874713526624977573",eps:!0},Ia=/^[A-Za-z_]\w*/;m.def=function(a,c){var b=null===a,d=w(T,b?c:a);if(!Ia.test(b?c:a))throw new q("def.invalid_name",b?c:a);if(b)return d;if(1===arguments.length){if(!d)throw new q("def.undefined",a);T[a]instanceof m||
(T[a]="eps"===a?ea(N(10),Q(-l)):ka(T[a]))}else{if(d)throw new q("def.already_set",{v:a,w:m.def(a)},!0);T[a]=G(c)}return x(T[a])};var W={abs:!0,inva:!1,ceil:!0,floor:!0,fact:!0,sqrt:!0,round:!0,sgn:!0,"int":"intp",div_100:"div_100"},U=["bop","pc","fs"],fa=["num","name","uop","po"],oa={"|":[1,!0,"max"],"&":[2,!0,"min"],"+":[3,!0,"add"],"-":[3,!0,"sub"],"*":[4,!0,"mul"],"#":[4,!0,"mod"],"/":[4,!0,"div"],"^":[5,!1,"pow"],"%":[7,!0,"div_100"],"!":[7,!0,"fact"],inva:[6,!0,"inva"],fn:[7,!0]},pa={num:{rx:/^([0-9., ]+)\s*/,
next:U},name:{rx:/^([A-Za-z_]\w*)\s*/},fn:{next:["po"]},vr:{next:U},bop:{rx:/^([-+*\/#^&|])\s*/,next:fa},uop:{rx:/^([-+])\s*/,next:fa},po:{rx:/^(\()\s*/,next:fa},pc:{rx:/^(\))\s*/,next:U},fs:{rx:/^([%!])\s*/,next:U}},Ja=/^[\s=]+/;m.calc=function(a,c){return new m(a,c instanceof Object?c:!0)};m.check=function(a,c){try{var b,d=xa(a,!1,!0===c),e=[];for(b in d)w(d,b)&&(e[d[b]]=b);return e}catch(f){return!1}};var xa=function(a,c,b){var d=String(a);a={size:0,vars:{}};c instanceof Object||(c={});for(var e,
f,k,h={r0:new m};e=d.match(/{+/);)e=e[0],f=d.indexOf(e),k=d.indexOf(e.replace(/{/g,"}"),f),d=d.slice(0,f)+(-1===k?"":"\t"+d.slice(k+e.length));f=d.split(";");for(e=0;e<f.length;e++){d=f[e].replace(Ja,"");k="r"+(e+1);if(""===d)d=h.r0;else{var g;var n=void 0;var r=d,H=c,qa=h,V=a,ra=b,X=fa;d=[];for(var L=[];""!==r;){var K=null;for(g=0;g<X.length&&null===K;g++)n=X[g],K=r.match(pa[n].rx);if(null!==K)g=K[1],r=r.slice(K[0].length);else{if(X!==U||r.match(pa.num.rx))throw new q("calc.unexpected",r);g="*";
n="bop"}switch(n){case "num":d.push(new m(g,!1));break;case "name":n="vr";if(w(W,g)&&!1!==W[g])n="fn",L.push(oa.fn.concat([g]));else if(null!==ra)w(V.vars,g)||ra&&(w(qa,g)||m.def(null,g))||(V.vars[g]=V.size++);else if(w(H,g))w(V.vars,g)||(V.vars[g]=new m(H[g])),d.push(new m(V.vars[g]));else if(w(qa,g))d.push(new m(qa[g]));else if(m.def(null,g))d.push(m.def(g));else throw new q("calc.undefined",g);break;case "fs":case "bop":for(K=oa[g];void 0!==(g=L.pop());){if("("===g||g[0]<=K[0]-(K[1]?1:0)){L.push(g);
break}d.push(g[2])}L.push(K);break;case "uop":"-"===g&&L.push(oa.inva);break;case "po":L.push(g);break;case "pc":for(;"("!==(g=L.pop());){if(void 0===g)throw new q("calc.unexpected",")");d.push(g[2])}}X=pa[n].next}for(;void 0!==(g=L.pop());){if("("===g)throw new q("calc.unexpected","(");d.push(g[2])}if(X!==U)throw new q("calc.unexpected","END");if(null!==ra)d=null;else{r=[];for(g=0;g<d.length;g++)if(n=d[g],n instanceof m)r.push(n);else if(w(W,n)){if("string"===typeof W[n]&&(n=W[n],-1!==n.indexOf("_"))){n=
n.split("_");r[r.length-1][n[0]](n[1],!0);continue}r[r.length-1][n](!0)}else r[r.length-2][n](r.pop(),!0);d=r[0]}}h[k]=h.r0=d;for(k=0;k<=e;k++)h["r0"+(k+1)]=h["r"+(e-k+1)]}return null===b?h.r0:a.vars};return m},sa=Fa();sa.extend=Fa;sa.MbnErr=q;return sa}();"object"===typeof module&&(module.exports["default"]=module.exports=Mbn);
