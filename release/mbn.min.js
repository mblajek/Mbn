/* Mbn v1.53.0 / 26.03.2023 | https://mbn.li | Copyright (c) 2016-2023 Mikołaj Błajek | https://mbn.li/LICENSE */
var Mbn=function(){var da={invalid_argument:"invalid argument: %v%",invalid_format:"invalid format: %v%",limit_exceeded:"value exceeded %v% digits limit",calc:{undefined:"undefined: %v%",unexpected:"unexpected: %v%"},cmp:{negative_diff:"negative maximal difference: %v%"},def:{undefined:"undefined constant: %v%",already_set:"constant already set: %v% = %w%",invalid_name:"invalid name for constant: %v%"},div:{zero_divisor:"division by zero"},extend:{invalid_precision:"invalid precision (non-negative integer): %v%",
invalid_separator:"invalid separator (dot, comma): %v%",invalid_truncation:"invalid truncation (bool): %v%",invalid_evaluating:"invalid evaluating (bool, null): %v%",invalid_formatting:"invalid formatting (bool): %v%",invalid_limit:"invalid digit limit (positive int): %v%"},fact:{invalid_value:"factorial of invalid value (non-negative integer): %v%"},format:{_:"extend"},pow:{unsupported_exponent:"only integer exponents supported: %v%"},reduce:{invalid_function:"invalid function name: %v%",no_array:"no array given",
invalid_argument_count:"two arguments can be used only with two-argument functions",different_lengths:"arrays have different lengths: %v%, %w%",different_keys:"arrays have different keys: [%v%], [%w%]"},split:{invalid_part_count:"only positive integer number of parts supported: %v%",zero_part_sum:"cannot split value when sum of parts is zero"},sqrt:{negative_value:"square root of negative value: %v%"}},T=null,u=function(p,l){return da.hasOwnProperty.call(p,l)},ea=function(p,l){if(p instanceof Array){var A=
[],w;if(void 0===l||!0===l)for(w=0;w<p.length;w++)A.push(ea(p[w],!1));else A.push("..");return"["+A.join(",")+"]"}return"string"===typeof p?'"'+p+'"':String(p)},q=function(p,l,A){var w={},t;if(1!==arguments.length){if("object"!==typeof l||!0!==A)l={v:l};for(t in l)if(u(l,t)){var v=ea(l[t]);w[t]=20<v.length?v.slice(0,18)+"..":v}}this.errorKey="mbn."+p;this.errorValues=w;v=null;if("function"===typeof T)try{v=T(this.errorKey,w)}catch(fa){}if("string"!==typeof v){var x=p.split("."),B=x.length;v="Mbn";
1<B&&(v+="."+x[0]);var D=da;for(t=0;t<B;t++){var C=D[x[t]];"object"===typeof C&&u(C,"_")&&(C=D[C._]);D=C}v+=" error: "+D}for(t in w)u(w,t)&&(v=v.replace("%"+t+"%",w[t]));this.message=v};q.prototype.toString=function(){return this.message};q.translate=function(p){T=p};var ha=function(p,l,A,w,t,v,x,B){if(u(p,"MbnP")&&(l=p.MbnP,"number"!==typeof l||0>l||!isFinite(l)||Math.round(l)!==l))throw new q(B+"invalid_precision",l);if(u(p,"MbnS")&&(A=p.MbnS,"."!==A&&","!==A))throw new q(B+"invalid_separator",
A);if(u(p,"MbnT")&&(w=p.MbnT,!0!==w&&!1!==w))throw new q(B+"invalid_truncation",w);if(u(p,"MbnE")&&(t=p.MbnE,!0!==t&&!1!==t&&null!==t))throw new q(B+"invalid_evaluating",t);if(u(p,"MbnF")&&(v=p.MbnF,!0!==v&&!1!==v))throw new q(B+"invalid_formatting",v);if(u(p,"MbnL")&&(x=p.MbnL,"number"!==typeof x||0>=x||!isFinite(x)||Math.round(x)!==x))throw new q(B+"invalid_limit",x);return{MbnV:"1.53.0",MbnP:l,MbnS:A,MbnT:w,MbnE:t,MbnF:v,MbnL:x}},pa=function(p){"object"!==typeof p&&(p=void 0!==p?{MbnP:p}:{});p=
ha(p,2,".",!1,null,!1,1E3,"extend.");for(var l=p.MbnP,A=p.MbnS,w=p.MbnT,t=p.MbnE,v=p.MbnF,x=p.MbnL,B=[0];B.length<=l;)B.push(0);var D=function(a){for(var c=a._d,b=c.length-1,d=b,e,f;0<=d;){for(e=c[d];0>e;)e+=10,c[d-1]--;f=e%10;e=(e-f)/10;c[d]=f;0!==e?0!==d?c[--d]+=e:(c.unshift(e),b++):d--}for(;b>l&&0===c[0];)c.shift(),b--;for(;b<l;)c.unshift(0),b++;if(b===l){for(d=0;d<=b&&0===c[d];d++);a._s*=d<=b?1:0}else if(b-l>x)throw new q("limit_exceeded",x);},C=function(a){var c=a._d,b=c.length;2>b&&(c.unshift(0),
b++);5<=c.pop()&&c[b-2]++;D(a)},fa=/^\s*(=)?[\s=]*([-+])?\s*((?:[\s\S]*\S)?)/,U=function(a,c,b,d,e){var f=a,m=a._d.length-l;if(c<l){var h=new k(a);f=h._d.length;c<l-1&&(h._d=h._d.slice(0,f-l+c+1));C(h);f=h._d.length;f-c>m&&(h._d=h._d.slice(f-c-m));f=h}h=f._d.slice(0,m);if(e){var g=h.length;for(e=0;3*e<g-3;e++)h.splice(-3-4*e,0," ")}m=f._d.slice(m);if(c>l&&!d)for(e=0;e<c-l;e++)m.push(0);if(d){for(e=m.length-1;0<=e&&0===m[e];e--);m=m.slice(0,e+1)}a=(0>a._s?"-":"")+h.join("");0<m.length&&(a+=b+m.join(""));
return a},V=function(a,c,b){c._s=0;c._d=B.slice();return c},K=V,k=function(a,c){if(!(this instanceof k))return new k(a,c);this._d=[0];K(a,this,c)},Q=k(0),J=u(Object,"setPrototypeOf")?function(a){return a?V(0,a):Object.setPrototypeOf({_s:0,_d:B.slice()},Q)}:function(a){return a?V(0,a):{__proto__:Q,_s:0,_d:Q._d.slice()}},H=function(a,c){var b=Math.abs(a),d=J(c);d._s=a&&a/b;d._d[0]=b;return d},N=H(1),W=function(a,c){var b=J(c);if(-9<=a&&9>=a&&a===Math.round(a))return H(a,b);b._d=[];b._s=1;var d=a;if(!isFinite(d)){if(isNaN(d))throw new q("invalid_argument",
d);throw new q("limit_exceeded",x);}0>d&&(d=-d,b._s=-1);var e=Math.floor(d);d-=e;do{var f=Math.round(e%10);e=Math.round((e-f)/10);b._d.unshift(f)}while(0<e);for(e=0;e<=l;e++)d*=10,f=Math.floor(d),f=10===f?9:f,b._d.push(f),d-=f;C(b);return b},z=function(a,c){var b=J(c);b._s=a._s;b._d=a._d.slice();return b},ja=function(a,c,b){c=J(c);if(-15>a.length){var d=a.replace(",","."),e=Number(d);if(isFinite(e)&&d===String(a))return W(e,c)}c._d=[];c._s=1;a:{d=a.match(fa);e=d[3];"-"===d[2]&&(c._s=-1);var f=(e.indexOf(".")+
1||e.indexOf(",")+1)-1,m=e.length,h=m;-1===f?f=m:h=f+1;var g=Math.max(h+l,m),n,r=0;for(n=0;n<=g;n++){var E=n<m?e.charCodeAt(n)-48:0;if(0<=E&&9>=E)n<=h+l&&c._d.push(E);else if(n===f&&1!==m||-16===E&&n>r&&n+1<f)-16===E&&(r=n+1);else{if(!0===b||b instanceof Object||!1!==b&&(!0===t||null===t&&"="===d[1])){c.set(ia(a,b,null));break a}throw new q("invalid_format",a);}}C(c)}return c};K=function(a,c,b){c=J(c);switch(typeof a){case "undefined":case "boolean":return H(Number(a||!1),c);case "number":return W(a,
c);case "bigint":case "object":c=c||J();if(a instanceof k)a=z(a,c);else{if(a&&a.toString===Array.prototype.toString)throw new q("invalid_argument",a);a=ja(null!==a?String(a):"0",c,b)}return a;case "string":return ja(a,c,b);default:throw new q("invalid_argument",a);}};k.prop=function(){return{MbnV:"1.53.0",MbnP:l,MbnS:A,MbnT:w,MbnE:t,MbnF:v,MbnL:x}};k.prototype.toString=function(){return U(this,l,A,w,v)};k.prototype.format=function(a){"object"!==typeof a&&(a={MbnF:0===arguments.length?!0:a});a=ha(a,
l,A,w,t,v,x,"format.");return U(this,a.MbnP,a.MbnS,a.MbnT,a.MbnF)};k.prototype.toNumber=function(){return Number(U(this,l,"."))};k.prototype.cmp=function(a,c){var b;a instanceof k||(a=new k(a));if(void 0===c||0===(b=new k(c))._s){if(this._s!==a._s)return this._s>a._s?1:-1;if(0===this._s)return 0;b=a._d.length;var d=this._d.length-b;if(0!==d)return 0<d?this._s:-this._s;for(d=0;d<b;d++)if(this._d[d]!==a._d[d])return this._d[d]>a._d[d]?this._s:-this._s;return 0}if(-1===b._s)throw new q("cmp.negative_diff",
b);return 0>=this.sub(a).abs().cmp(b)?0:this.cmp(a)};k.prototype.eq=function(a,c){return 0===this.cmp(a,c)};var ka=function(a,c,b){return 1===a.length?a(c):a(c,b instanceof k?b:K(b))},y=function(a,c,b,d){return z(ka(a,b,d),!0===c?b:void 0)},R=function(a,c){a._d=c._d.slice();a._s=c._s},qa=function(a){for(var c=a._d.length-l;c<a._d.length;c++)if(0!==a._d[c])return!1;return!0},X=function(a,c){var b=z(c);if(0!==a._s)if(0===c._s)R(b,a);else if(c._s===a._s){var d=a._d.length-c._d.length;0>d?(c=a,d=-d):
R(b,a);for(var e=0;e<b._d.length;e++)e>=d&&(b._d[e]+=c._d[e-d]);D(b)}else b._s=-b._s,b=la(b,a),b._s=-b._s;return b},la=function(a,c){var b=z(c);if(0===a._s)b._s=-b._s;else if(0===c._s)R(b,a);else if(c._s===a._s){var d=a._d.length-c._d.length,e=a.cmp(c)*a._s;if(0===e)b=H(0);else{-1===e?(c=a,d=-d):R(b,a);for(var f=0;f<b._d.length;f++)f>=d&&(b._d[f]-=c._d[f-d]);b._s=e*a._s;D(b)}}else b._s=-b._s,b=X(b,a);return b},ma=function(a,c){var b=z(c);b._d=[];for(var d=0;d<a._d.length;d++)for(var e=0;e<c._d.length;e++)b._d[d+
e]=a._d[d]*c._d[e]+(b._d[d+e]||0);b._s=a._s*c._s;D(b);1<=l&&(1<l&&(b._d=b._d.slice(0,1-l)),C(b));return b},ra=function(a,c){if(0===c._s)throw new q("div.zero_divisor");if(0===a._s)return new z(a);for(var b=a._d.slice(),d=c._d.slice(),e=0,f=[0];0===d[0];)d.shift();for(;0===b[0];)b.shift();for(var m=l+1;d.length<b.length;)d.push(0),m++;var h,g,n;do{for(;0===b[(g=b.length)-1]+d[(n=d.length)-1];)b.pop(),d.pop();var r=g>=n;if(g===n)for(h=0;h<g;h++)if(b[h]!==d[h]){r=b[h]>d[h];break}if(r)for(f[e]++,g-=n,
h=n-1;0<=h;h--)b[h+g]<d[h]?(b[h+g-1]--,b[h+g]+=10-d[h]):b[h+g]-=d[h];else b.push(0),e++,f[e]=0;for(;0===b[0];)b.shift()}while(0!==b.length&&e<=m);for(;e<=m;)f[++e]=0;f.pop();b=z(c);b._s*=a._s;b._d=f;C(b);return b},sa=function(a,c){var b=na(c),d=a.sub(a.div(b).intp().mul(b));-1===d._s*a._s&&(d=b.sub(d.abs()),d._s=a._s);return d},ta=function(a){a=z(a);if(0!==l){for(var c=0,b=a._d.length-l;b<a._d.length;b++)c+=a._d[b],a._d[b]=0;-1===a._s&&0<c&&a._d[a._d.length-l-1]++;D(a)}return a},ua=function(a){a=
z(a);if(0!==l){var c=a._d.length-l;for(a._d[c-1]+=5<=a._d[c]?1:0;c<a._d.length;)a._d[c++]=0;D(a)}return a},na=function(a){a=z(a);a._s*=a._s;return a},va=function(a){a=z(a);a._s=-a._s;return a},wa=function(a){return H(1).div(a)},xa=function(a){return a.inva().floor().inva()},ya=function(a){return 1===a._s?a.floor():a.inva().floor().inva()},za=function(a,c){return z(-1===a.cmp(c)?a:c)},Aa=function(a,c){return z(1===a.cmp(c)?a:c)},Ba=function(a){var c=a.mul(100),b=c.add(0);if(-1===b._s)throw new q("sqrt.negative_value",
a);if(1===b._s){a=H(2);var d=null,e=0;do{var f=d;d=b.add(Q).sub(b.add(c.div(b),!0).div(a,!0),!0);e+=f&&-1===d._s*f._s?1:0}while(0!==d._s&&4>e);C(b)}return b},Ca=function(a){return H(a._s)},Da=function(a,c){var b=z(c);if(!b.isInt())throw new q("pow.unsupported_exponent",b);var d=b._s;b._s*=b._s;b=b.toNumber();var e=z(a);-1===d&&-1===e.abs().cmp(N)&&(e.invm(!0),d=-d);for(var f=0,m=0,h=H(1);!e.isInt();)e._d.push(0),D(e),f++;for(;;){1===b%2&&(h.mul(e,!0),m+=f);b=Math.floor(b/2);if(0===b)break;e.mul(e,
!0);f*=2}1<=m&&(1<m&&(h._d=h._d.slice(0,1-m)),C(h));-1===d&&h.invm(!0);return h},Ea=function(a){if(!a.isInt()||-1===a._s)throw new q("fact.invalid_value",a);var c=a.sub(N);for(a=a.max(N);1===c._s;)a.mul(c,!0),c.sub(N,!0);return a};k.prototype.set=function(a){a instanceof k?z(a,this):K(a,this);return this};k.prototype.isInt=function(){return ka(qa,this)};k.prototype.add=function(a,c){return y(X,c,this,a)};k.prototype.sub=function(a,c){return y(la,c,this,a)};k.prototype.mul=function(a,c){return y(ma,
c,this,a)};k.prototype.div=function(a,c){return y(ra,c,this,a)};k.prototype.mod=function(a,c){return y(sa,c,this,a)};k.prototype.floor=function(a){return y(ta,a,this)};k.prototype.round=function(a){return y(ua,a,this)};k.prototype.abs=function(a){return y(na,a,this)};k.prototype.inva=function(a){return y(va,a,this)};k.prototype.invm=function(a){return y(wa,a,this)};k.prototype.ceil=function(a){return y(xa,a,this)};k.prototype.intp=function(a){return y(ya,a,this)};k.prototype.min=function(a,c){return y(za,
c,this,a)};k.prototype.max=function(a,c){return y(Aa,c,this,a)};k.prototype.sqrt=function(a){return y(Ba,a,this)};k.prototype.sgn=function(a){return y(Ca,a,this)};k.prototype.pow=function(a,c){return y(Da,c,this,a)};k.prototype.fact=function(a){return y(Ea,a,this)};k.prototype.split=function(a){var c=[],b;void 0===a&&(a=2);if(a instanceof Array){var d=W(10).pow(l);var e=J();var f=a.length;var m=[!1,!1,!1];for(b=0;b<f;b++){var h=ma(K(a[b]),d);m[h._s+1]=!0;e=X(e,h);c.push([b,h])}m[0]&&m[2]&&c.sort(function(n,
r){return e._s*n[1].cmp(r[1])})}else{e=K(a);if(!e.isInt())throw new q("split.invalid_part_count",a);f=e.toNumber();for(b=0;b<f;b++)c.push([b,N])}if(0>=f)throw new q("split.invalid_part_count",f);if(0===e._s)throw new q("split.zero_part_sum");a=z(this);d=[];d.length=f;for(b=0;b<f;b++)if(h=c[b][0],m=c[b][1],0===m._s)d[h]=m;else{var g=a.mul(m).div(e);e.sub(m,!0);a.sub(g,!0);d[h]=g}return d};var oa={set:0,abs:1,inva:1,invm:1,ceil:1,floor:1,sqrt:1,round:1,sgn:1,intp:1,fact:1,min:2,max:2,add:2,sub:2,mul:2,
div:2,mod:2,pow:2};k.reduce=function(a,c,b){var d=!1;if(!u(oa,a))throw new q("reduce.invalid_function",a);if(!(c instanceof Array)){if(!(b instanceof Array))throw new q("reduce.no_array");d=b;b=c;c=d}var e,f=c.length,m=oa[a],h=3===arguments.length?b instanceof Array?2:1:0;if(2!==m&&0!==h)throw new q("reduce.invalid_argument_count");if(2===m&&0===h){var g=new k(0<f?c[0]:0);for(e=1;e<f;e++)g[a](c[e],!0)}else{g=[];if(2===h&&f!==b.length)throw new q("reduce.different_lengths",{v:f,w:b.length},!0);var n=
1===h?new k(b):null;for(e=0;e<f;e++){var r=new k(c[e]);if(0!==h){var E=2===h?new k(b[e]):n;r.set(!1===d?r[a](E):E[a](r))}g.push(1===m?r[a](!0):r)}}return g};var F={PI:"3.1415926535897932384626433832795028841972",E:"2.7182818284590452353602874713526624977573",eps:!0},Fa=/^[A-Za-z_]\w*/;k.def=function(a,c){var b=null===a;if(!Fa.test(b?c:a))throw new q("def.invalid_name",b?c:a);if(b)return u(F,c);if(void 0===c){if(!u(F,a))throw new q("def.undefined",a);F[a]instanceof k||(F[a]="eps"===a?(new k(10)).pow(-l):
new k(F[a]));return new k(F[a])}if(u(F,a))throw new q("def.already_set",{v:a,w:new k(F[a])},!0);c=new k(c);F[a]=c;return new k(c)};var O={abs:!0,inva:!1,ceil:!0,floor:!0,fact:!0,sqrt:!0,round:!0,sgn:!0,"int":"intp",div_100:"div_100"},L=["bop","pc","fs"],S=["num","name","uop","po"],Y={"|":[1,!0,"max"],"&":[2,!0,"min"],"+":[3,!0,"add"],"-":[3,!0,"sub"],"*":[4,!0,"mul"],"#":[4,!0,"mod"],"/":[4,!0,"div"],"^":[5,!1,"pow"],"%":[7,!0,"div_100"],"!":[7,!0,"fact"],inva:[6,!0,"inva"],fn:[7,!0]},Z={num:{rx:/^([0-9., ]+)\s*/,
next:L},name:{rx:/^([A-Za-z_]\w*)\s*/},fn:{next:["po"]},vr:{next:L},bop:{rx:/^([-+*\/#^&|])\s*/,next:S},uop:{rx:/^([-+])\s*/,next:S},po:{rx:/^(\()\s*/,next:S},pc:{rx:/^(\))\s*/,next:L},fs:{rx:/^([%!])\s*/,next:L}},Ga=/^[\s=]+/;k.calc=function(a,c){return new k(a,c instanceof Object?c:!0)};k.check=function(a,c){try{var b,d=ia(a,!1,!0===c),e=[];for(b in d)u(d,b)&&(e[d[b]]=b);return e}catch(f){return!1}};var ia=function(a,c,b){var d=String(a);a={size:0,vars:{}};c instanceof Object||(c={});for(var e,
f,m,h={r0:new k};e=d.match(/{+/);)e=e[0],f=d.indexOf(e),m=d.indexOf(e.replace(/{/g,"}"),f),d=d.slice(0,f)+(-1===m?"":"\t"+d.slice(m+e.length));f=d.split(";");for(e=0;e<f.length;e++){d=f[e].replace(Ga,"");m="r"+(e+1);if(""===d)d=h.r0;else{var g;var n=void 0;var r=d,E=c,aa=h,M=a,ba=b,P=S;d=[];for(var I=[];""!==r;){var G=null;for(g=0;g<P.length&&null===G;g++)n=P[g],G=r.match(Z[n].rx);if(null!==G)g=G[1],r=r.slice(G[0].length);else{if(P!==L||r.match(Z.num.rx))throw new q("calc.unexpected",r);g="*";n="bop"}switch(n){case "num":d.push(new k(g,
!1));break;case "name":n="vr";if(u(O,g)&&!1!==O[g])n="fn",I.push(Y.fn.concat([g]));else if(null!==ba)u(M.vars,g)||ba&&(u(aa,g)||k.def(null,g))||(M.vars[g]=M.size++);else if(u(E,g))u(M.vars,g)||(M.vars[g]=new k(E[g])),d.push(new k(M.vars[g]));else if(u(aa,g))d.push(new k(aa[g]));else if(k.def(null,g))d.push(k.def(g));else throw new q("calc.undefined",g);break;case "fs":case "bop":for(G=Y[g];void 0!==(g=I.pop());){if("("===g||g[0]<=G[0]-(G[1]?1:0)){I.push(g);break}d.push(g[2])}I.push(G);break;case "uop":"-"===
g&&I.push(Y.inva);break;case "po":I.push(g);break;case "pc":for(;"("!==(g=I.pop());){if(void 0===g)throw new q("calc.unexpected",")");d.push(g[2])}}P=Z[n].next}for(;void 0!==(g=I.pop());){if("("===g)throw new q("calc.unexpected","(");d.push(g[2])}if(P!==L)throw new q("calc.unexpected","END");if(null!==ba)d=null;else{r=[];for(g=0;g<d.length;g++)if(n=d[g],n instanceof k)r.push(n);else if(u(O,n)){if("string"===typeof O[n]&&(n=O[n],-1!==n.indexOf("_"))){n=n.split("_");r[r.length-1][n[0]](n[1],!0);continue}r[r.length-
1][n](!0)}else r[r.length-2][n](r.pop(),!0);d=r[0]}}h[m]=h.r0=d;for(m=0;m<=e;m++)h["r0"+(m+1)]=h["r"+(e-m+1)]}return null===b?h.r0:a.vars};return k},ca=pa();ca.extend=pa;ca.MbnErr=q;return ca}();"object"===typeof module&&(module.exports["default"]=module.exports=Mbn);
