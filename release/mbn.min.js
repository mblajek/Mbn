/* Mbn v1.52.1 / 09.02.2023 | https://mbn.li | Copyright (c) 2016-2023 Mikołaj Błajek | https://mbn.li/LICENSE */
var Mbn=function(){var S={invalid_argument:"invalid argument: %v%",invalid_format:"invalid format: %v%",limit_exceeded:"value exceeded %v% digits limit",calc:{undefined:"undefined: %v%",unexpected:"unexpected: %v%"},cmp:{negative_diff:"negative maximal difference: %v%"},def:{undefined:"undefined constant: %v%",already_set:"constant already set: %v% = %w%",invalid_name:"invalid name for constant: %v%"},div:{zero_divisor:"division by zero"},extend:{invalid_precision:"invalid precision (non-negative integer): %v%",
invalid_separator:"invalid separator (dot, comma): %v%",invalid_truncation:"invalid truncation (bool): %v%",invalid_evaluating:"invalid evaluating (bool, null): %v%",invalid_formatting:"invalid formatting (bool): %v%",invalid_limit:"invalid digit limit (positive int): %v%"},fact:{invalid_value:"factorial of invalid value (non-negative integer): %v%"},format:{_:"extend"},pow:{unsupported_exponent:"only integer exponents supported: %v%"},reduce:{invalid_function:"invalid function name: %v%",no_array:"no array given",
invalid_argument_count:"two arguments can be used only with two-argument functions",different_lengths:"arrays have different lengths: %v%, %w%",different_keys:"arrays have different keys: [%v%], [%w%]"},split:{invalid_part_count:"only positive integer number of parts supported: %v%",zero_part_sum:"cannot split value when sum of parts is zero"},sqrt:{negative_value:"square root of negative value: %v%"}},L=null,v=function(p,m){return S.hasOwnProperty.call(p,m)},T=function(p,m){if(p instanceof Array){var A=
[],w;if(void 0===m||!0===m)for(w=0;w<p.length;w++)A.push(T(p[w],!1));else A.push("..");return"["+A.join(",")+"]"}return"string"===typeof p?'"'+p+'"':String(p)},q=function(p,m,A){var w={},t;if(1!==arguments.length){if("object"!==typeof m||!0!==A)m={v:m};for(t in m)if(v(m,t)){var u=T(m[t]);w[t]=20<u.length?u.slice(0,18)+"..":u}}this.errorKey="mbn."+p;this.errorValues=w;u=null;if("function"===typeof L)try{u=L(this.errorKey,w)}catch(U){}if("string"!==typeof u){var y=p.split("."),z=y.length;u="Mbn";1<
z&&(u+="."+y[0]);var x=S;for(t=0;t<z;t++){var B=x[y[t]];"object"===typeof B&&v(B,"_")&&(B=x[B._]);x=B}u+=" error: "+x}for(t in w)v(w,t)&&(u=u.replace("%"+t+"%",w[t]));this.message=u};q.prototype.toString=function(){return this.message};q.translate=function(p){L=p};var V=function(p,m,A,w,t,u,y,z){if(v(p,"MbnP")&&(m=p.MbnP,"number"!==typeof m||0>m||!isFinite(m)||Math.round(m)!==m))throw new q(z+"invalid_precision",m);if(v(p,"MbnS")&&(A=p.MbnS,"."!==A&&","!==A))throw new q(z+"invalid_separator",A);if(v(p,
"MbnT")&&(w=p.MbnT,!0!==w&&!1!==w))throw new q(z+"invalid_truncation",w);if(v(p,"MbnE")&&(t=p.MbnE,!0!==t&&!1!==t&&null!==t))throw new q(z+"invalid_evaluating",t);if(v(p,"MbnF")&&(u=p.MbnF,!0!==u&&!1!==u))throw new q(z+"invalid_formatting",u);if(v(p,"MbnL")&&(y=p.MbnL,"number"!==typeof y||0>=y||!isFinite(y)||Math.round(y)!==y))throw new q(z+"invalid_limit",y);return{MbnV:"1.52.1",MbnP:m,MbnS:A,MbnT:w,MbnE:t,MbnF:u,MbnL:y}},Y=function(p){"object"!==typeof p&&(p=void 0!==p?{MbnP:p}:{});p=V(p,2,".",
!1,null,!1,1E3,"extend.");var m=p.MbnP,A=p.MbnS,w=p.MbnT,t=p.MbnE,u=p.MbnF,y=p.MbnL,z=function(a){for(var e=a._d,b=e.length-1,c=b,d,h;0<=c;){for(d=e[c];0>d;)d+=10,e[c-1]--;h=d%10;d=(d-h)/10;e[c]=h;0!==d?0!==c?e[--c]+=d:(e.unshift(d),b++):c--}for(;b>m&&0===e[0];)e.shift(),b--;for(;b<m;)e.unshift(0),b++;if(b===m){for(c=0;c<=b&&0===e[c];c++);a._s*=c<=b?1:0}else if(b-m>y)throw new q("limit_exceeded",y);},x=function(a,e,b){return!0===b?(a._d=e._d,a._s=e._s,a):e},B=function(a){var e=a._d,b=e.length;2>b&&
(e.unshift(0),b++);5<=e.pop()&&e[b-2]++;z(a)},U=/^\s*(=)?[\s=]*([-+])?\s*((?:[\s\S]*\S)?)/,M=function(a,e,b,c,d){var h=a,l=a._d.length-m;if(e<m){var k=new f(a);h=k._d.length;e<m-1&&(k._d=k._d.slice(0,h-m+e+1));B(k);h=k._d.length;h-e>l&&(k._d=k._d.slice(h-e-l));h=k}k=h._d.slice(0,l);if(d){var g=k.length;for(d=0;3*d<g-3;d++)k.splice(-3-4*d,0," ")}l=h._d.slice(l);if(e>m&&!c)for(d=0;d<e-m;d++)l.push(0);if(c){for(d=l.length-1;0<=d&&0===l[d];d--);l=l.slice(0,d+1)}a=(0>a._s?"-":"")+k.join("");0<l.length&&
(a+=b+l.join(""));return a},f=function(a,e){if(!(this instanceof f))return new f(a,e);this._s=1;this._d=[];switch(typeof a){case "undefined":a=!1;case "boolean":a=Number(a);case "number":var b=a;if(!isFinite(b)){if(isNaN(b))throw new q("invalid_argument",b);throw new q("limit_exceeded",y);}0>b&&(b=-b,this._s=-1);var c=Math.floor(b);b-=c;do{var d=Math.round(c%10);c=Math.round((c-d)/10);this._d.unshift(d)}while(0<c);for(c=0;c<=m;c++)b*=10,d=Math.floor(b),d=10===d?9:d,this._d.push(d),b-=d;B(this);break;
case "bigint":case "object":if(a instanceof f){this.set(a);break}else if(a instanceof Array)throw new q("invalid_argument",a);a=null!==a?String(a):"0";case "string":a:{b=a;c=b.match(U);d=c[3];"-"===c[2]&&(this._s=-1);var h=(d.indexOf(".")+1||d.indexOf(",")+1)-1,l=d.length,k=l;-1===h?h=l:k=h+1;var g=Math.max(k+m,l),n,r=0;for(n=0;n<=g;n++){var C=n<l?d.charCodeAt(n)-48:0;if(0<=C&&9>=C)n<=k+m&&this._d.push(C);else if(n===h&&1!==l||-16===C&&n>r&&n+1<h)-16===C&&(r=n+1);else{if(!0===e||e instanceof Object||
!1!==e&&(!0===t||null===t&&"="===c[1])){this.set(W(b,e,null));break a}throw new q("invalid_format",b);}}B(this)}break;default:throw new q("invalid_argument",a);}};f.prop=function(){return{MbnV:"1.52.1",MbnP:m,MbnS:A,MbnT:w,MbnE:t,MbnF:u,MbnL:y}};f.prototype.set=function(a){a instanceof f?(this._d=a._d.slice(),this._s=a._s):x(this,new f(a),!0);return this};f.prototype.toString=function(){return M(this,m,A,w,u)};f.prototype.format=function(a){"object"!==typeof a&&(a={MbnF:0===arguments.length?!0:a});
a=V(a,m,A,w,t,u,y,"format.");return M(this,a.MbnP,a.MbnS,a.MbnT,a.MbnF)};f.prototype.toNumber=function(){return Number(M(this,m,"."))};f.prototype.cmp=function(a,e){var b;a instanceof f||(a=new f(a));if(void 0===e||0===(b=new f(e))._s){if(this._s!==a._s)return this._s>a._s?1:-1;if(0===this._s)return 0;b=a._d.length;var c=this._d.length-b;if(0!==c)return 0<c?this._s:-this._s;for(c=0;c<b;c++)if(this._d[c]!==a._d[c])return this._d[c]>a._d[c]?this._s:-this._s;return 0}if(-1===b._s)throw new q("cmp.negative_diff",
b);return 0>=this.sub(a).abs().cmp(b)?0:this.cmp(a)};f.prototype.add=function(a,e){a instanceof f||(a=new f(a));var b=new f(a);if(0!==this._s)if(0===a._s)b.set(this);else if(a._s===this._s){var c=this._d.length-a._d.length;0>c?(a=this,c=-c):b.set(this);for(var d=0;d<b._d.length;d++)d>=c&&(b._d[d]+=a._d[d-c]);z(b)}else b._s=-b._s,b.sub(this,!0),b._s=-b._s;return x(this,b,e)};f.prototype.sub=function(a,e){a instanceof f||(a=new f(a));var b=new f(a);if(0===this._s)b._s=-b._s;else if(0===a._s)b.set(this);
else if(a._s===this._s){var c=this._d.length-a._d.length,d=this.cmp(a)*this._s;if(0===d)b=new f(0);else{-1===d?(a=this,c=-c):b.set(this);for(var h=0;h<b._d.length;h++)h>=c&&(b._d[h]-=a._d[h-c]);b._s=d*this._s;z(b)}}else b._s=-b._s,b.add(this,!0);return x(this,b,e)};f.prototype.mul=function(a,e){a instanceof f||(a=new f(a));var b=new f(a);b._d=[];for(var c=0;c<this._d.length;c++)for(var d=0;d<a._d.length;d++)b._d[c+d]=this._d[c]*a._d[d]+(b._d[c+d]||0);b._s=this._s*a._s;z(b);1<=m&&(1<m&&(b._d=b._d.slice(0,
1-m)),B(b));return x(this,b,e)};f.prototype.div=function(a,e){a instanceof f||(a=new f(a));if(0===a._s)throw new q("div.zero_divisor");if(0===this._s)return x(this,new f(this),e);for(var b=this._d.slice(),c=a._d.slice(),d=0,h=[0];0===c[0];)c.shift();for(;0===b[0];)b.shift();for(var l=m+1;c.length<b.length;)c.push(0),l++;var k,g,n;do{for(;0===b[(g=b.length)-1]+c[(n=c.length)-1];)b.pop(),c.pop();var r=g>=n;if(g===n)for(k=0;k<g;k++)if(b[k]!==c[k]){r=b[k]>c[k];break}if(r)for(h[d]++,g-=n,k=n-1;0<=k;k--)b[k+
g]<c[k]?(b[k+g-1]--,b[k+g]+=10-c[k]):b[k+g]-=c[k];else b.push(0),d++,h[d]=0;for(;0===b[0];)b.shift()}while(0!==b.length&&d<=l);for(;d<=l;)h[++d]=0;h.pop();b=new f(a);b._s*=this._s;b._d=h;B(b);return x(this,b,e)};f.prototype.mod=function(a,e){var b=a instanceof f?a.abs():(new f(a)).abs(),c=this.sub(this.div(b).intp().mul(b));-1===c._s*this._s&&(c=b.sub(c.abs()),c._s=this._s);return x(this,c,e)};f.prototype.split=function(a){var e=[],b;void 0===a&&(a=2);if(a instanceof Array){var c=(new f(10)).pow(m);
var d=new f(0);var h=a.length;var l=[!1,!1,!1];for(b=0;b<h;b++){var k=(new f(a[b])).mul(c);l[k._s+1]=!0;d.add(k,!0);e.push([b,k])}l[0]&&l[2]&&e.sort(function(n,r){return d._s*n[1].cmp(r[1])})}else{c=new f(1);d=new f(a);if(!d.isInt())throw new q("split.invalid_part_count",a);h=d.toNumber();for(b=0;b<h;b++)e.push([b,c])}if(0>=h)throw new q("split.invalid_part_count",h);if(0===d._s)throw new q("split.zero_part_sum");a=new f(this);c=[];c.length=h;for(b=0;b<h;b++)if(k=e[b][0],l=e[b][1],0===l._s)c[k]=l;
else{var g=a.mul(l).div(d);d.sub(l,!0);a.sub(g,!0);c[k]=g}return c};f.prototype.isInt=function(){for(var a=this._d.length-m;a<this._d.length;a++)if(0!==this._d[a])return!1;return!0};f.prototype.floor=function(a){a=!0===a?this:new f(this);if(0!==m){for(var e=0,b=a._d.length-m;b<a._d.length;b++)e+=a._d[b],a._d[b]=0;-1===a._s&&0<e&&a._d[a._d.length-m-1]++;z(a)}return a};f.prototype.round=function(a){a=!0===a?this:new f(this);if(0!==m){var e=a._d.length-m;for(a._d[e-1]+=5<=a._d[e]?1:0;e<a._d.length;)a._d[e++]=
0;z(a)}return a};f.prototype.abs=function(a){a=!0===a?this:new f(this);a._s*=a._s;return a};f.prototype.inva=function(a){a=!0===a?this:new f(this);a._s=-a._s;return a};f.prototype.invm=function(a){return x(this,(new f(1)).div(this),a)};f.prototype.ceil=function(a){return(!0===a?this:new f(this)).inva(!0).floor(!0).inva(!0)};f.prototype.intp=function(a){a=!0===a?this:new f(this);return 0<=a._s?a.floor(!0):a.ceil(!0)};f.prototype.eq=function(a,e){return 0===this.cmp(a,e)};f.prototype.min=function(a,
e){return x(this,new f(0>=this.cmp(a)?this:a),e)};f.prototype.max=function(a,e){return x(this,new f(0<=this.cmp(a)?this:a),e)};f.prototype.sqrt=function(a){var e=this.mul(100),b=e.add(0);if(-1===b._s)throw new q("sqrt.negative_value",this);if(1===b._s){var c=new f(2),d=null,h=0;do{var l=d;d=b.add(0).sub(b.add(e.div(b),!0).div(c,!0),!0);h+=l&&-1===d._s*l._s?1:0}while(0!==d._s&&4>h);B(b)}return x(this,b,a)};f.prototype.sgn=function(a){return x(this,new f(this._s),a)};f.prototype.pow=function(a,e){var b=
new f(a);if(!b.isInt())throw new q("pow.unsupported_exponent",b);var c=b._s;b._s*=b._s;b=b.toNumber();var d=new f(1),h=new f(this);-1===c&&-1===h.abs().cmp(d)&&(h.invm(!0),c=-c);var l=0,k=0;for(d=new f(d);!h.isInt();)h._d.push(0),z(h),l++;for(;;){1===b%2&&(d.mul(h,!0),k+=l);b=Math.floor(b/2);if(0===b)break;h.mul(h,!0);l*=2}1<=k&&(1<k&&(d._d=d._d.slice(0,1-k)),B(d));-1===c&&d.invm(!0);return x(this,d,e)};f.prototype.fact=function(a){if(!this.isInt()||-1===this._s)throw new q("fact.invalid_value",this);
for(var e=this.sub(1),b=this.max(1);1===e._s;)b.mul(e,!0),e.sub(1,!0);return x(this,b,a)};var X={set:0,abs:1,inva:1,invm:1,ceil:1,floor:1,sqrt:1,round:1,sgn:1,intp:1,fact:1,min:2,max:2,add:2,sub:2,mul:2,div:2,mod:2,pow:2};f.reduce=function(a,e,b){var c=!1;if(!v(X,a))throw new q("reduce.invalid_function",a);if(!(e instanceof Array)){if(!(b instanceof Array))throw new q("reduce.no_array");c=b;b=e;e=c}var d,h=e.length,l=X[a],k=3===arguments.length?b instanceof Array?2:1:0;if(2!==l&&0!==k)throw new q("reduce.invalid_argument_count");
if(2===l&&0===k){var g=new f(0<h?e[0]:0);for(d=1;d<h;d++)g[a](e[d],!0)}else{g=[];if(2===k&&h!==b.length)throw new q("reduce.different_lengths",{v:h,w:b.length},!0);var n=1===k?new f(b):null;for(d=0;d<h;d++){var r=new f(e[d]);if(0!==k){var C=2===k?new f(b[d]):n;r.set(!1===c?r[a](C):C[a](r))}g.push(1===l?r[a](!0):r)}}return g};var D={PI:"3.1415926535897932384626433832795028841972",E:"2.7182818284590452353602874713526624977573",eps:!0},Z=/^[A-Za-z_]\w*/;f.def=function(a,e){var b=null===a;if(!Z.test(b?
e:a))throw new q("def.invalid_name",b?e:a);if(b)return v(D,e);if(void 0===e){if(!v(D,a))throw new q("def.undefined",a);D[a]instanceof f||(D[a]="eps"===a?(new f(10)).pow(-m):new f(D[a]));return new f(D[a])}if(v(D,a))throw new q("def.already_set",{v:a,w:new f(D[a])},!0);e=new f(e);D[a]=e;return new f(e)};var I={abs:!0,inva:!1,ceil:!0,floor:!0,fact:!0,sqrt:!0,round:!0,sgn:!0,"int":"intp",div_100:"div_100"},G=["bop","pc","fs"],K=["num","name","uop","po"],N={"|":[1,!0,"max"],"&":[2,!0,"min"],"+":[3,!0,
"add"],"-":[3,!0,"sub"],"*":[4,!0,"mul"],"#":[4,!0,"mod"],"/":[4,!0,"div"],"^":[5,!1,"pow"],"%":[7,!0,"div_100"],"!":[7,!0,"fact"],inva:[6,!0,"inva"],fn:[7,!0]},O={num:{rx:/^([0-9., ]+)\s*/,next:G},name:{rx:/^([A-Za-z_]\w*)\s*/},fn:{next:["po"]},vr:{next:G},bop:{rx:/^([-+*\/#^&|])\s*/,next:K},uop:{rx:/^([-+])\s*/,next:K},po:{rx:/^(\()\s*/,next:K},pc:{rx:/^(\))\s*/,next:G},fs:{rx:/^([%!])\s*/,next:G}},aa=/^[\s=]+/;f.calc=function(a,e){return new f(a,e instanceof Object?e:!0)};f.check=function(a,e){try{var b,
c=W(a,!1,!0===e),d=[];for(b in c)v(c,b)&&(d[c[b]]=b);return d}catch(h){return!1}};var W=function(a,e,b){var c=String(a);a={size:0,vars:{}};e instanceof Object||(e={});for(var d,h,l,k={r0:new f};d=c.match(/{+/);)d=d[0],h=c.indexOf(d),l=c.indexOf(d.replace(/{/g,"}"),h),c=c.slice(0,h)+(-1===l?"":"\t"+c.slice(l+d.length));h=c.split(";");for(d=0;d<h.length;d++){c=h[d].replace(aa,"");l="r"+(d+1);if(""===c)c=k.r0;else{var g;var n=void 0;var r=c,C=e,P=k,H=a,Q=b,J=K;c=[];for(var F=[];""!==r;){var E=null;for(g=
0;g<J.length&&null===E;g++)n=J[g],E=r.match(O[n].rx);if(null!==E)g=E[1],r=r.slice(E[0].length);else{if(J!==G||r.match(O.num.rx))throw new q("calc.unexpected",r);g="*";n="bop"}switch(n){case "num":c.push(new f(g,!1));break;case "name":n="vr";if(v(I,g)&&!1!==I[g])n="fn",F.push(N.fn.concat([g]));else if(null!==Q)v(H.vars,g)||Q&&(v(P,g)||f.def(null,g))||(H.vars[g]=H.size++);else if(v(C,g))v(H.vars,g)||(H.vars[g]=new f(C[g])),c.push(new f(H.vars[g]));else if(v(P,g))c.push(new f(P[g]));else if(f.def(null,
g))c.push(f.def(g));else throw new q("calc.undefined",g);break;case "fs":case "bop":for(E=N[g];void 0!==(g=F.pop());){if("("===g||g[0]<=E[0]-(E[1]?1:0)){F.push(g);break}c.push(g[2])}F.push(E);break;case "uop":"-"===g&&F.push(N.inva);break;case "po":F.push(g);break;case "pc":for(;"("!==(g=F.pop());){if(void 0===g)throw new q("calc.unexpected",")");c.push(g[2])}}J=O[n].next}for(;void 0!==(g=F.pop());){if("("===g)throw new q("calc.unexpected","(");c.push(g[2])}if(J!==G)throw new q("calc.unexpected",
"END");if(null!==Q)c=null;else{r=[];for(g=0;g<c.length;g++)if(n=c[g],n instanceof f)r.push(n);else if(v(I,n)){if("string"===typeof I[n]&&(n=I[n],-1!==n.indexOf("_"))){n=n.split("_");r[r.length-1][n[0]](n[1],!0);continue}r[r.length-1][n](!0)}else r[r.length-2][n](r.pop(),!0);c=r[0]}}k[l]=k.r0=c;for(l=0;l<=d;l++)k["r0"+(l+1)]=k["r"+(d-l+1)]}return null===b?k.r0:a.vars};return f},R=Y();R.extend=Y;R.MbnErr=q;return R}();"object"===typeof module&&(module.exports["default"]=module.exports=Mbn);
