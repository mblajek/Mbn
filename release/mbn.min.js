/* Mbn v1.53.0 / 16.04.2023 | https://mbn.li | Copyright (c) 2016-2023 Mikołaj Błajek | https://mbn.li/LICENSE */
"use strict";var Mbn=function(){function ln(n){return n instanceof Array}function r(n){return"string"==typeof n?'"'+n+'"':String(n)}function cn(n,t,e,r,i,o,u,a,s){return bn(n,"MbnP")&&("number"!=typeof(t=n.MbnP)||t<0||!isFinite(t)||Math.round(t)!==t)&&Mn(s+"invalid_precision",t),bn(n,"MbnS")&&"."!==(e=n.MbnS)&&","!==e&&Mn(s+"invalid_separator",e),bn(n,"MbnT")&&!0!==(r=n.MbnT)&&!1!==r&&Mn(s+"invalid_truncation",r),bn(n,"MbnE")&&!0!==(i=n.MbnE)&&!1!==i&&null!==i&&Mn(s+"invalid_evaluating",i),bn(n,"MbnF")&&!0!==(o=n.MbnF)&&!1!==o&&Mn(s+"invalid_formatting",o),bn(n,"MbnL")&&("number"!=typeof(u=n.MbnL)||u<=0||!isFinite(u)||Math.round(u)!==u)&&Mn(s+"invalid_limit",u),bn(n,"MbnO")&&("number"!=typeof(a=n.MbnO)||a<=0||!isFinite(a)||Math.round(a)!==a)&&Mn(s+"invalid_operations",a),{MbnV:dn,MbnP:t,MbnS:e,MbnT:r,MbnE:i,MbnF:o,MbnL:u,MbnO:a}}function n(c){mn(c)||(c=void 0!==c?{MbnP:c}:{});for(var p=(c=cn(c,2,".",!1,null,!1,1e3,1e7,"extend.")).MbnP,N=c.MbnS,A=c.MbnT,v=c.MbnE,I=c.MbnF,d=c.MbnL,_=c.MbnO,Z={MbnP:p,MbnS:".",MbnT:A,MbnE:v,MbnF:!1,MbnL:d,MbnO:_},C=[0];C.length<=p;)C.push(0);function D(n,t,e){return M(p),t._s=0,t._d=C.slice(),t}function K(n,t){var e=P(t);if(Math.abs(n)<1e9&&n===Math.round(n))return k(n,e);isFinite(n)||(isNaN(n)&&Mn("invalid_argument",n),Mn("limit_exceeded",d));for(var r,i,o=[],u=1,a=(n<0&&(n*=u=-1),Math.floor(n)),s=n-a;r=Math.round(a%10),a=Math.round((a-r)/10),o.unshift(r),0<a;);for(i=0;i<=p;i++)s=(s*=10)-(r=Math.min(Math.floor(s),9)),o.push(r);return e._d=o,e._s=u,x(t),e}function r(n,t,e){for(var r=[t[en=0]],i=1;i<t.length;i++){var o=t[i];r.push(S(o)||e?o:w(o))}return n.apply(null,r)}function e(n,t,e){return E(r(n,t),!0===e?t[0]:null)}function n(n){return rn(n,c)}function G(n){return Number(rn(n,Z))}function H(n,t,e){return 0===T(n,t,e)}function s(n){M(p);for(var t=n._d.length-p;t<n._d.length;t++)if(0!==n._d[t])return!1;return!0}function J(n,t){return t}function h(n,t){var e=E(t);e._d=[],M(n._d.length*t._d.length);for(var r=0;r<n._d.length;r++)for(var i=0;i<t._d.length;i++)e._d[r+i]=n._d[r]*t._d[i]+(e._d[r+i]||0);return e._s=n._s*t._s,y(e),1<=p&&(1<p&&(e._d=e._d.slice(0,1-p)),x(e)),e}function g(n,t){if(0===t._s&&Mn("div.zero_divisor"),0===n._s)return E(n);for(var e=n._d.slice(),r=t._d.slice(),i=0,o=[0];0===r[0];)r.shift();for(;0===e[0];)e.shift();for(var u,a,s,f=p+1;r.length<e.length;)r.push(0),f++;do{for(;e[(a=e.length)-1]+r[(s=r.length)-1]===0;)e.pop(),r.pop();var l=s<=a;if(a===s)for(M(a),u=0;u<a;u++)if(e[u]!==r[u]){l=e[u]>r[u];break}if(l){o[i]++;var c=a-s;for(M(s),u=s-1;0<=u;u--)e[u+c]<r[u]?(e[u+c-1]--,e[u+c]+=10-r[u]):e[u+c]-=r[u]}else e.push(0),o[++i]=0;for(;0===e[0];)e.shift()}while(0!==e.length&&i<=f);for(;i<=f;)o[++i]=0;return o.pop(),(t=E(t))._s*=n._s,t._d=o,x(t),t}function Q(n,t){var t=B(t),e=q(n,h(u(g(n,t)),t));return e._s*n._s==-1&&((e=q(t,B(e)))._s=n._s),e}function t(n){var t=E(n);if(0!==p){for(var e=0,r=t._d.length-p;r<t._d.length;r++)e+=t._d[r],t._d[r]=0;-1===t._s&&0<e&&t._d[t._d.length-p-1]++,y(t)}return t}function R(n){var t=E(n);if(0!==p){var e=t._d.length-p;for(t._d[e-1]+=5<=t._d[e]?1:0;e<t._d.length;)t._d[e++]=0;y(t)}return t}function i(n){return(n=E(n))._s=-n._s,n}function f(n){return g(z,n)}function o(n){return i(t(i(n)))}function u(n){return(1===n._s?t:o)(n)}function U(n,t){return E(-1===T(n,t,F)?n:t)}function a(n,t){return E(1===T(n,t,F)?n:t)}function W(n){var t=h(n,k(100)),e=E(t);if(-1===e._s&&Mn("sqrt.negative_value",n),1===e._s){for(var r,i=k(2),o=F,u=0;r=o,o=q(e,g(V(e,g(t,e)),i)),e=q(e,o),u+=o._s*r._s==-1?1:0,0!==o._s&&u<4;);x(e)}return e}function X(n){return k(n._s)}function b(n,t){for(var t=E(t),e=(s(t)||Mn("pow.unsupported_exponent",t),t._s),r=(t._s*=t._s,G(t)),i=E(n),o=(-1===e&&-1===T(B(i),z,F)&&(i=f(i),e=-e),0),u=0,a=z;!s(i);)i._d.push(0),y(i),o++;for(;;){if(r%2==1&&(a=h(a,i),u+=o),0===(r=Math.floor(r/2)))break;i=h(i,i),o*=2}return 1<=u&&(1<u&&(a._d=a._d.slice(0,1-u)),x(a)),a=-1===e?f(a):a}function l(n){s(n)&&-1!==n._s||Mn("fact.invalid_value",n);for(var t=q(n,z),e=a(n,z);1===t._s;)e=h(e,t),t=q(t,z);return e}function Y(n,t){var e=[];if(ln(t=void 0===t?2:t)){for(var r=b(k(10),K(p)),i=P(),o=t.length,u=[!1,!1,!1],a=0;a<o;a++){var s=h(w(t[a]),r);u[s._s+1]=!0,i=V(i,s),e.push([a,s])}u[0]&&u[2]&&e.sort(function(n,t){return i._s*T(n[1],t[1],F)})}else for((i=w(t)).isInt()||Mn("split.invalid_part_count",t),o=G(i),a=0;a<o;a++)e.push([a,z]);o<=0&&Mn("split.invalid_part_count",o),0===i._s&&Mn("split.zero_part_sum");var f=E(n),l=[];for(l.length=o,a=0;a<o;a++){var c,d,_=e[a][0];0===(d=e[a][1])._s?l[_]=d:(c=g(h(f,d),i),i=q(i,d),f=q(f,c),l[_]=c)}return l}function m(n,t){var e=null===n,r=bn(L,e?t:n);return vn.test(e?t:n)||Mn("def.invalid_name",e?t:n),e?r:(1===arguments.length?(r||Mn("def.undefined",n),S(L[n])||(L[n]="eps"===n?b(k(10),K(-p)):j(L[n]))):(r&&Mn("def.already_set",{v:n,w:m(n)},!0),L[n]=w(t)),E(L[n]))}function $(n,t,e){bn(on,n)||Mn("reduce.invalid_function",n);var r,i=!1,o=on[n],u=(ln(t)||(ln(e)||Mn("reduce.no_array"),i=e,e=t,t=i),t.length),n="set"===n?0:o.length,a=3===arguments.length?ln(e)?2:1:0;if(2!==n&&0!=a&&Mn("reduce.invalid_argument_count"),2===n&&0==a)for(r=w(u?t[0]:0),f=1;f<u;f++)r=o(r,w(t[f]));else{r=[],2==a&&u!==e.length&&Mn("reduce.different_lengths",{v:u,w:e.length},!0);for(var s=n&&1==a?w(e):F,f=0;f<u;f++){var l=w(t[f]),c=2==a?w(e[f]):s;r.push(i?o(c,l):o(l,c))}}return r}function nn(n,t){return w(n,null,!mn(t)||t)}function tn(n,t){try{var e,r=sn(n,!1,!0===t),i=[];for(e in r)bn(r,e)&&(i[r[e]]=e);return i}catch(n){return!1}}var en=0,M=function(n){_<(en+=n||1)&&Mn("operations_limit",_)},y=function(n){var t,e,r,i=n._d,o=i.length-1,u=o;for(M(2*u);0<=u;){for(t=i[u];t<0;)t+=10,i[u-1]--;r=(t-(e=t%10))/10,i[u]=e,0!=r?0!==u?i[--u]+=r:(i.unshift(r),o++):u--}for(;p<o&&0===i[0];)i.shift(),o--;for(;o<p;)i.unshift(0),o++;if(o===p){for(u=0;u<=o&&0===i[u];u++);n._s*=u<=o?1:0}else d<o-p&&Mn("limit_exceeded",d)},x=function(n){var t=n._d;t.length<2&&t.unshift(0),5<=t.pop()&&t[t.length-1]++,y(n)},w=D,O=function(n,t){if(!S(this))return new O(n,t);en=0,w(n,this,t)},S=function(n){return n instanceof O},F=O(0),P=bn(Object,"setPrototypeOf")?function(n){return D(0,n||Object.setPrototypeOf({},F))}:function(n){return D(0,n||{__proto__:F})},k=function(n,t){var e=P(t);if(0!==n){var r=Math.abs(n);for(e._s=n/r,e._d[0]=r%10;10<=r;)r=(r-e._d[0])/10,e._d.unshift(r%10)}return M(e._d.length),e},z=k(1),E=function(n,t){t=P(t);return t._s=n._s,t._d=n._d.slice(),M(t._d.length),t},j=function(n,t,e){for(var r,i=P(t),o=n.match(_n),u=o[3],a=[],t=1,s=("-"===o[2]&&(t=-1),(u.indexOf(".")+1||u.indexOf(",")+1)-1),f=u.length,l=f,c=(-1===s?s=f:l=s+1,Math.max(l+p,f)),d=0,_=0;_<=c;_++)if(0<=(r=_<f?u.charCodeAt(_)-48:0)&&r<=9)_<=l+p&&a.push(r);else if(_===s&&1!==f||-16==r&&d<_&&_+1<s)-16==r&&(d=_+1);else{if(!0===e||mn(e)||!1!==e&&(!0===v||null===v&&"="===o[1]))return E(sn(n,e,null),i),i;Mn("invalid_format",n)}return i._d=a,i._s=t,x(i),i},w=function(n,t,e){var r=P(t);switch(typeof n){case"undefined":case"boolean":return k(Number(n||!1),r);case"number":return K(n,r);case"bigint":case"object":var i=n,o=r,u=e;return o=o||P(),S(i)?E(i,o):(i&&i.toString===Array.prototype.toString&&Mn("invalid_argument",i),j(null!==i?String(i):"0",o,u));case"string":return j(n,r,e);default:Mn("invalid_argument",n)}},rn=function(n,t){var e,r=(t=(t=mn(t)?t:{MbnF:void 0===t||t})===c||t===Z?t:cn(t,p,N,A,v,I,d,_,"format.")).MbnP,i=n,o=n._d.length-p,u=(r<p&&(l=(e=E(n))._d.length,r<p-1&&(e._d=e._d.slice(0,l-p+r+1)),x(e),o<(l=e._d.length)-r&&(e._d=e._d.slice(l-r-o)),i=e),i._d.slice(0,o));if(t.MbnF)for(var a=u.length,s=0;3*s<a-3;s++)u.splice(-3-4*s,0," ");var f=i._d.slice(o);if(p<r&&!t.MbnT)for(s=0;s<r-p;s++)f.push(0);if(t.MbnT){for(s=f.length-1;0<=s&&0===f[s];s--);f=f.slice(0,s+1)}var l=(n._s<0?"-":"")+u.join("");return 0<f.length&&(l+=t.MbnS+f.join("")),l},T=function(n,t,e){if(0!==e._s)return-1===e._s&&Mn("cmp.negative_diff",e),1!==T(B(q(n,t)),e,F)?0:T(n,t,F);if(n._s!==t._s)return n._s>t._s?1:-1;if(0!==n._s){var r=t._d.length,e=n._d.length-r;if(0!=e)return 0<e?n._s:-n._s;M(r);for(var i=0;i<r;i++)if(n._d[i]!==t._d[i])return n._d[i]>t._d[i]?n._s:-n._s}return 0},V=function(n,t){var e=E(t);if(0!==n._s)if(0===t._s)E(n,e);else if(t._s===n._s){var r=n._d.length-t._d.length;r<0?(t=n,r=-r):E(n,e);for(var i=0;i<e._d.length;i++)r<=i&&(e._d[i]+=t._d[i-r]);y(e)}else e._s=-e._s,(e=q(e,n))._s=-e._s;return e},q=function(n,t){var e=E(t);if(0===n._s)e._s=-e._s;else if(0===t._s)E(n,e);else if(t._s===n._s){var r=n._d.length-t._d.length,i=T(n,t,F)*n._s;if(0==i)e=k(0);else{-1==i?(t=n,r=-r):E(n,e);for(var o=0;o<e._d.length;o++)r<=o&&(e._d[o]-=t._d[o-r]);e._s=i*n._s,y(e)}}else e._s=-e._s,e=V(e,n);return e},B=function(n){n=E(n);return n._s*=n._s,n},on={set:V,abs:B,inva:i,invm:f,ceil:o,floor:t,sqrt:W,round:R,sgn:X,intp:u,fact:l,min:U,max:a,add:V,sub:q,mul:h,div:g,mod:Q,pow:b},L={PI:"3.1415926535897932384626433832795028841972",E:"2.7182818284590452353602874713526624977573",eps:!0},un={abs:B,ceil:o,floor:t,fact:l,sqrt:W,round:R,sgn:X,int:u,zero:function(n){return k(0===n._s?1:0)}},an={"|":[1,!0,a],"&":[2,!0,U],"+":[3,!0,V],"-":[3,!0,q],"*":[4,!0,h],"#":[4,!0,Q],"/":[4,!0,g],"^":[5,!1,b],"%":[7,!0,function(n){return g(n,k(100))}],"!":[7,!0,l],inva:[6,!0,i],fn:[7,!0]},sn=function(n,t,e){var r=String(n),i={size:0,vars:{}};mn(t)||(t={});for(var o,u,a,s,f={r0:P()};o=r.match(/{+/);)o=o[0],u=r.indexOf(o),a=r.indexOf(o.replace(/{/g,"}"),u),r=r.slice(0,u)+(-1===a?"":"\t"+r.slice(a+o.length));for(var l=r.split(";"),c=0;c<l.length;c++)for(r=l[c].replace(pn,""),f["r"+(c+1)]=f.r0=""===r?f.r0:fn(r,t,f,i,e),s=0;s<=c;s++)f["r0"+(s+1)]=f["r"+(c-s+1)];return null===e?f.r0:i.vars},fn=function(n,t,e,r,i){for(var o,u,a,s,f=hn.uopVal,l=[],c=[];""!==n;){for(a=null,M(f.length),h=0;h<f.length&&null===a;h++)o=f[h],a=n.match(gn[o].rx);switch(null!==a?(u=a[1],n=n.slice(a[0].length)):f!==hn.endBop||n.match(gn.num.rx)?Mn("calc.unexpected",n):(u="*",o="bop"),o){case"num":l.push(j(u,null,!1));break;case"name":o="vr",bn(un,u)?(o="fn",c.push(an.fn.concat(un[u]))):null!==i?bn(r.vars,u)||i&&(bn(e,u)||m(null,u))||(r.vars[u]=r.size++):bn(t,u)?(bn(r.vars,u)||(r.vars[u]=w(t[u])),l.push(E(r.vars[u]))):bn(e,u)?l.push(E(e[u])):m(null,u)?l.push(m(u)):Mn("calc.undefined",u);break;case"fs":case"bop":for(var d=an[u];void 0!==(s=c.pop());){if("("===s||s[0]<=d[0]-(d[1]?1:0)){c.push(s);break}l.push(s[2])}c.push(d);break;case"uop":"-"===u&&c.push(an.inva);break;case"po":c.push(u);break;case"pc":for(;"("!==(s=c.pop());)void 0===s&&Mn("calc.unexpected",")"),l.push(s[2])}f=gn[o].next}for(;void 0!==(s=c.pop());)"("===s&&Mn("calc.unexpected","("),l.push(s[2]);if(f!==hn.endBop&&Mn("calc.unexpected","END"),null!==i)return null;for(var _,p,v=[],h=0;h<l.length;h++)S(_=l[h])?v.push(_):(p=2===_.length?v.pop():null,v[v.length-1]=_(v[v.length-1],p));return v[0]};return O.prototype.toString=function(){return r(n,[this])},O.prototype.format=function(n){return r(rn,[this,n],!0)},O.prototype.toNumber=function(){return r(G,[this])},O.prototype.cmp=function(n,t){return r(T,[this,n,t])},O.prototype.eq=function(n,t){return r(H,[this,n,t])},O.prototype.isInt=function(){return r(s,[this])},O.prototype.set=function(n){return e(J,[this,n],!0)},O.prototype.add=function(n,t){return e(V,[this,n],t)},O.prototype.sub=function(n,t){return e(q,[this,n],t)},O.prototype.mul=function(n,t){return e(h,[this,n],t)},O.prototype.div=function(n,t){return e(g,[this,n],t)},O.prototype.mod=function(n,t){return e(Q,[this,n],t)},O.prototype.floor=function(n){return e(t,[this],n)},O.prototype.round=function(n){return e(R,[this],n)},O.prototype.abs=function(n){return e(B,[this],n)},O.prototype.inva=function(n){return e(i,[this],n)},O.prototype.invm=function(n){return e(f,[this],n)},O.prototype.ceil=function(n){return e(o,[this],n)},O.prototype.intp=function(n){return e(u,[this],n)},O.prototype.min=function(n,t){return e(U,[this,n],t)},O.prototype.max=function(n,t){return e(a,[this,n],t)},O.prototype.sqrt=function(n){return e(W,[this],n)},O.prototype.sgn=function(n){return e(X,[this],n)},O.prototype.pow=function(n,t){return e(b,[this,n],t)},O.prototype.fact=function(n){return e(l,[this],n)},O.prototype.split=function(n){return r(Y,[this,n],!0)},O.prop=function(){return{MbnV:dn,MbnP:p,MbnS:N,MbnT:A,MbnE:v,MbnF:I,MbnL:d,MbnO:_}},O.def=function(n,t){return r(m,[n,t].slice(0,arguments.length),!0)},O.reduce=function(n,t,e){return r($,[n,t,e].slice(0,arguments.length),!0)},O.calc=function(n,t){return r(nn,[n,t],!0)},O.check=function(n,t){return r(tn,[n,t],!0)},O}var dn="1.53.0",d={invalid_argument:"invalid argument: %v%",invalid_format:"invalid format: %v%",limit_exceeded:"value exceeded %v% digits limit",operations_limit:"calculation exceeded %v% operations limit",calc:{undefined:"undefined: %v%",unexpected:"unexpected: %v%"},cmp:{negative_diff:"negative maximal difference: %v%"},def:{undefined:"undefined constant: %v%",already_set:"constant already set: %v% = %w%",invalid_name:"invalid name for constant: %v%"},div:{zero_divisor:"division by zero"},extend:{invalid_precision:"invalid precision (non-negative integer): %v%",invalid_separator:"invalid separator (dot, comma): %v%",invalid_truncation:"invalid truncation (bool): %v%",invalid_evaluating:"invalid evaluating (bool, null): %v%",invalid_formatting:"invalid formatting (bool): %v%",invalid_limit:"invalid digit limit (positive int): %v%",invalid_operations:"invalid operations limit (positive int): %v%"},fact:{invalid_value:"factorial of invalid value (non-negative integer): %v%"},format:{_:"extend"},pow:{unsupported_exponent:"only integer exponents supported: %v%"},reduce:{invalid_function:"invalid function name: %v%",no_array:"no array given",invalid_argument_count:"two arguments can be used only with two-argument functions",different_lengths:"arrays have different lengths: %v%, %w%",different_keys:"arrays have different keys: [%v%], [%w%]"},split:{invalid_part_count:"only positive integer number of parts supported: %v%",zero_part_sum:"cannot split value when sum of parts is zero"},sqrt:{negative_value:"square root of negative value: %v%"}},_=null,_n=/^\s*(=)?[\s=]*([-+])?\s*((?:[\s\S]*\S)?)/,pn=/^[\s=]+/,vn=/^[A-Za-z_]\w*/,hn={endBop:["bop","pc","fs"],uopVal:["num","name","uop","po"],fn:["po"]},gn={num:{rx:/^([0-9., ]+)\s*/,next:hn.endBop},name:{rx:/^([A-Za-z_]\w*)\s*/},fn:{next:hn.fn},vr:{next:hn.endBop},bop:{rx:/^([-+*\/#^&|])\s*/,next:hn.uopVal},uop:{rx:/^([-+])\s*/,next:hn.uopVal},po:{rx:/^(\()\s*/,next:hn.uopVal},pc:{rx:/^(\))\s*/,next:hn.endBop},fs:{rx:/^([%!])\s*/,next:hn.endBop}},bn=function(n,t){return d.hasOwnProperty.call(n,t)},mn=function(n){return n instanceof Object},p=function(n,t,e){this.errorKey=n,this.errorValues=t,this.message=e},v=function(n){if(ln(n)){for(var t=[],e=0;e<n.length&&e<20;e++)t.push(ln(n[e])?"[..]":r(n[e]));return"["+t.join()+"]"}return r(n)},Mn=function(n,t,e){var r,i={},o="mbn."+n;if(1!==arguments.length)for(l in t=mn(t)&&!0===e?t:{v:t})bn(t,l)&&(r=v(t[l]),i[l]=20<r.length?r.slice(0,18)+"..":r);var u=null;if("function"==typeof _)try{u=_(o,i)}catch(n){}if("string"!=typeof u){for(var a=n.split("."),s=a.length,u="Mbn",f=(1<s&&(u+="."+a[0]),d),l=0;l<s;l++)var c=f[a[l]],f=c=mn(c)&&bn(c,"_")?f[c._]:c;u+=" error: "+f}for(l in i)bn(i,l)&&(u=u.replace("%"+l+"%",i[l]));throw new p(o,i,u)},t=(p.prototype.toString=function(){return this.message},p.translate=function(n){_=n},n());return t.extend=n,t.MbnErr=p,t}();"object"==typeof module&&(module.exports.default=module.exports=Mbn);
