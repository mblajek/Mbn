/* Mbn v1.53.0 / 15.04.2023 | https://mbn.li | Copyright (c) 2016-2023 Mikołaj Błajek | https://mbn.li/LICENSE */
"use strict";var Mbn=function(){function on(n){return n instanceof Array}function e(n){return _n(n)?'"'+n+'"':String(n)}function un(n,t,r,e,i,o,u,a){return dn(n,"MbnP")&&(t=n.MbnP,s(t)&&!(t<0)&&isFinite(t)&&Math.round(t)===t||vn(a+"invalid_precision",t)),dn(n,"MbnS")&&"."!==(r=n.MbnS)&&","!==r&&vn(a+"invalid_separator",r),dn(n,"MbnT")&&!0!==(e=n.MbnT)&&!1!==e&&vn(a+"invalid_truncation",e),dn(n,"MbnE")&&!0!==(i=n.MbnE)&&!1!==i&&null!==i&&vn(a+"invalid_evaluating",i),dn(n,"MbnF")&&!0!==(o=n.MbnF)&&!1!==o&&vn(a+"invalid_formatting",o),dn(n,"MbnL")&&(u=n.MbnL,s(u)&&!(u<=0)&&isFinite(u)&&Math.round(u)===u||vn(a+"invalid_limit",u)),{MbnV:an,MbnP:t,MbnS:r,MbnT:e,MbnE:i,MbnF:o,MbnL:u}}function n(d){pn(d)||(d=void 0!==d?{MbnP:d}:{});for(var v=(d=un(d,2,".",!1,null,!1,1e3,"extend.")).MbnP,L=d.MbnS,c=d.MbnT,h=d.MbnE,A=d.MbnF,_=d.MbnL,I={MbnP:v,MbnS:".",MbnT:c,MbnE:h,MbnF:!1,MbnL:_},e=[0];e.length<=v;)e.push(0);function t(n,t,r){return t._s=0,t._d=e.slice(),t}function i(n,t,r){for(var e=[t[0]],i=1;i<t.length;i++){var o=t[i];e.push(w(o)||r?o:y(o))}return n.apply(null,e)}function r(n,t,r){return O(i(n,t),!0===r?t[0]:null)}function o(n,t){var r,e=(t=(t=pn(t)?t:{MbnF:void 0===t||t})===d||t===I?t:un(t,v,L,c,h,A,_,"format.")).MbnP,i=n,o=n._d.length-v,u=(e<v&&(l=(r=O(n))._d.length,e<v-1&&(r._d=r._d.slice(0,l-v+e+1)),M(r),o<(l=r._d.length)-e&&(r._d=r._d.slice(l-e-o)),i=r),i._d.slice(0,o));if(t.MbnF)for(var a=u.length,s=0;3*s<a-3;s++)u.splice(-3-4*s,0," ");var f=i._d.slice(o);if(v<e&&!t.MbnT)for(s=0;s<e-v;s++)f.push(0);if(t.MbnT){for(s=f.length-1;0<=s&&0===f[s];s--);f=f.slice(0,s+1)}var l=(n._s<0?"-":"")+u.join("");return 0<f.length&&(l+=t.MbnS+f.join("")),l}function n(n){return o(n,d)}function Z(n){return Number(o(n,I))}function C(n,t,r){return 0===E(n,t,r)}function s(n){for(var t=n._d.length-v;t<n._d.length;t++)if(0!==n._d[t])return!1;return!0}function D(n,t){return t}function p(n,t){var r=O(t);r._d=[];for(var e=0;e<n._d.length;e++)for(var i=0;i<t._d.length;i++)r._d[e+i]=n._d[e]*t._d[i]+(r._d[e+i]||0);return r._s=n._s*t._s,m(r),1<=v&&(1<v&&(r._d=r._d.slice(0,1-v)),M(r)),r}function g(n,t){if(0===t._s&&vn("div.zero_divisor"),0===n._s)return O(n);for(var r=n._d.slice(),e=t._d.slice(),i=0,o=[0];0===e[0];)e.shift();for(;0===r[0];)r.shift();for(var u,a,s=v+1;e.length<r.length;)e.push(0),s++;do{for(;r[(u=r.length)-1]+e[(a=e.length)-1]===0;)r.pop(),e.pop();var f=a<=u;if(u===a)for(d=0;d<u;d++)if(r[d]!==e[d]){f=r[d]>e[d];break}if(f){o[i]++;for(var l=u-a,d=a-1;0<=d;d--)r[d+l]<e[d]?(r[d+l-1]--,r[d+l]+=10-e[d]):r[d+l]-=e[d]}else r.push(0),o[++i]=0;for(;0===r[0];)r.shift()}while(0!==r.length&&i<=s);for(;i<=s;)o[++i]=0;return o.pop(),(t=O(t))._s*=n._s,t._d=o,M(t),t}function K(n,t){var t=T(t),r=j(n,p(H(g(n,t)),t));return r._s*n._s==-1&&((r=j(t,T(r)))._s=n._s),r}function u(n){var t=O(n);if(0!==v){for(var r=0,e=t._d.length-v;e<t._d.length;e++)r+=t._d[e],t._d[e]=0;-1===t._s&&0<r&&t._d[t._d.length-v-1]++,m(t)}return t}function G(n){var t=O(n);if(0!==v){var r=t._d.length-v;for(t._d[r-1]+=5<=t._d[r]?1:0;r<t._d.length;)t._d[r++]=0;m(t)}return t}function a(n){return(n=O(n))._s=-n._s,n}function f(n){return g(k,n)}function l(n){return a(u(a(n)))}function H(n){return(1===n._s?u:l)(n)}function J(n,t){return O(-1===E(n,t,S)?n:t)}function Q(n,t){return O(1===E(n,t,S)?n:t)}function R(n){var t=p(n,P(100)),r=O(t);if(-1===r._s&&vn("sqrt.negative_value",n),1===r._s){for(var e,i=P(2),o=S,u=0;u+=.01,e=o,o=j(r,g(N(r,g(t,r)),i)),r=j(r,o),u+=o._s*e._s==-1?1:0,0!==o._s&&u<4;);M(r)}return r}function U(n){return P(n._s)}function b(n,t){for(var t=O(t),r=(s(t)||vn("pow.unsupported_exponent",t),t._s),e=(t._s*=t._s,t.toNumber()),i=O(n),o=(-1===r&&-1===E(T(i),k,S)&&(i=f(i),r=-r),0),u=0,a=k;!s(i);)i._d.push(0),m(i),o++;for(;;){if(e%2==1&&(a=p(a,i),u+=o),0===(e=Math.floor(e/2)))break;i=p(i,i),o*=2}return 1<=u&&(1<u&&(a._d=a._d.slice(0,1-u)),M(a)),a=-1===r?f(a):a}function W(n){s(n)&&-1!==n._s||vn("fact.invalid_value",n);for(var t=j(n,k),r=Q(n,k);1===t._s;)r=p(r,t),t=j(t,k);return r}function X(n,t){var r=[];if(on(t=void 0===t?2:t)){for(var e=b(P(10),z(v)),i=F(),o=t.length,u=[!1,!1,!1],a=0;a<o;a++){var s=p(y(t[a]),e);u[s._s+1]=!0,i=N(i,s),r.push([a,s])}u[0]&&u[2]&&r.sort(function(n,t){return i._s*E(n[1],t[1],S)})}else for((i=y(t)).isInt()||vn("split.invalid_part_count",t),o=i.toNumber(),a=0;a<o;a++)r.push([a,k]);o<=0&&vn("split.invalid_part_count",o),0===i._s&&vn("split.zero_part_sum");var f=O(n),l=[];for(l.length=o,a=0;a<o;a++){var d,c,_=r[a][0];0===(c=r[a][1])._s?l[_]=c:(d=g(p(f,c),i),i=j(i,c),f=j(f,d),l[_]=d)}return l}var m=function(n){for(var t,r,e,i=n._d,o=i.length-1,u=o;0<=u;){for(t=i[u];t<0;)t+=10,i[u-1]--;e=(t-(r=t%10))/10,i[u]=r,0!=e?0!==u?i[--u]+=e:(i.unshift(e),o++):u--}for(;v<o&&0===i[0];)i.shift(),o--;for(;o<v;)i.unshift(0),o++;if(o===v){for(u=0;u<=o&&0===i[u];u++);n._s*=u<=o?1:0}else _<o-v&&vn("limit_exceeded",_)},M=function(n){var t=n._d;t.length<2&&t.unshift(0),5<=t.pop()&&t[t.length-1]++,m(n)},y=t,x=function(n,t){if(!w(this))return new x(n,t);y(n,this,t)},w=function(n){return n instanceof x},S=x(0),F=dn(Object,"setPrototypeOf")?function(n){return n?t(0,n):Object.setPrototypeOf({_s:0,_d:e.slice()},S)}:function(n){return n?t(0,n):{__proto__:S,_s:0,_d:S._d.slice()}},P=function(n,t){var r=F(t);if(0!==n){var e=Math.abs(n);for(r._s=n/e,r._d[0]=e%10;10<=e;)e=(e-r._d[0])/10,r._d.unshift(e%10)}return r},k=P(1),z=function(n,t){var r=F(t);if(Math.abs(n)<1e9&&n===Math.round(n))return P(n,r);isFinite(n)||(isNaN(n)&&vn("invalid_argument",n),vn("limit_exceeded",_));for(var e,i,o=[],u=1,a=(n<0&&(n*=u=-1),Math.floor(n)),s=n-a;e=Math.round(a%10),a=Math.round((a-e)/10),o.unshift(e),0<a;);for(i=0;i<=v;i++)s=(s*=10)-(e=Math.min(Math.floor(s),9)),o.push(e);return r._d=o,r._s=u,M(t),r},O=function(n,t){t=F(t);return t._s=n._s,t._d=n._d.slice(),t},Y=function(n,t,r){var e=F(t);if(n.length<-15){var t=n.replace(",","."),i=Number(t);if(isFinite(i)&&t===String(n))return z(i,e)}for(var o,u=n.match(sn),a=u[3],s=[],t=1,f=("-"===u[2]&&(t=-1),(a.indexOf(".")+1||a.indexOf(",")+1)-1),l=a.length,d=l,c=(-1===f?f=l:d=f+1,Math.max(d+v,l)),_=0,p=0;p<=c;p++)if(0<=(o=p<l?a.charCodeAt(p)-48:0)&&o<=9)p<=d+v&&s.push(o);else if(p===f&&1!==l||-16==o&&_<p&&p+1<f)-16==o&&(_=p+1);else{if(!0===r||pn(r)||!1!==r&&(!0===h||null===h&&"="===u[1]))return O(rn(n,r,null),e),e;vn("invalid_format",n)}return e._d=s,e._s=t,M(e),e},y=function(n,t,r){var e=F(t);switch(cn(n)){case"undefined":case"boolean":return P(Number(n||!1),e);case"number":return z(n,e);case"bigint":case"object":var i=n,o=e,u=r;return o=o||F(),w(i)?O(i,o):(i&&i.toString===Array.prototype.toString&&vn("invalid_argument",i),Y(null!==i?String(i):"0",o,u));case"string":return Y(n,e,r);default:vn("invalid_argument",n)}},E=function(n,t,r){if(0!==r._s)return-1===r._s&&vn("cmp.negative_diff",r),1!==E(T(j(n,t)),r,S)?0:E(n,t,S);if(n._s!==t._s)return n._s>t._s?1:-1;if(0!==n._s){var e=t._d.length,r=n._d.length-e;if(0!=r)return 0<r?n._s:-n._s;for(var i=0;i<e;i++)if(n._d[i]!==t._d[i])return n._d[i]>t._d[i]?n._s:-n._s}return 0},N=function(n,t){var r=O(t);if(0!==n._s)if(0===t._s)O(n,r);else if(t._s===n._s){var e=n._d.length-t._d.length;e<0?(t=n,e=-e):O(n,r);for(var i=0;i<r._d.length;i++)e<=i&&(r._d[i]+=t._d[i-e]);m(r)}else r._s=-r._s,(r=j(r,n))._s=-r._s;return r},j=function(n,t){var r=O(t);if(0===n._s)r._s=-r._s;else if(0===t._s)O(n,r);else if(t._s===n._s){var e=n._d.length-t._d.length,i=E(n,t,S)*n._s;if(0==i)r=P(0);else{-1==i?(t=n,e=-e):O(n,r);for(var o=0;o<r._d.length;o++)e<=o&&(r._d[o]-=t._d[o-e]);r._s=i*n._s,m(r)}}else r._s=-r._s,r=N(r,n);return r},T=function(n){n=O(n);return n._s*=n._s,n},$={set:N,abs:T,inva:a,invm:f,ceil:l,floor:u,sqrt:R,round:G,sgn:U,intp:H,fact:W,min:J,max:Q,add:N,sub:j,mul:p,div:g,mod:K,pow:b},V=(x.reduce=function(n,t,r){dn($,n)||vn("reduce.invalid_function",n);var e,i=!1,o=$[n],u=(on(t)||(on(r)||vn("reduce.no_array"),i=r,r=t,t=i),t.length),n="set"===n?0:o.length,a=3===arguments.length?on(r)?2:1:0;if(2!==n&&0!=a&&vn("reduce.invalid_argument_count"),2===n&&0==a)for(e=y(u?t[0]:0),f=1;f<u;f++)e=o(e,y(t[f]));else{e=[],2==a&&u!==r.length&&vn("reduce.different_lengths",{v:u,w:r.length},!0);for(var s=n&&1==a?y(r):S,f=0;f<u;f++){var l=y(t[f]),d=2==a?y(r[f]):s;e.push(i?o(d,l):o(l,d))}}return e},{PI:"3.1415926535897932384626433832795028841972",E:"2.7182818284590452353602874713526624977573",eps:!0}),q={abs:!0,inva:!(x.def=function(n,t){var r=null===n,e=dn(V,r?t:n);return ln.test(r?t:n)||vn("def.invalid_name",r?t:n),r?e:(1===arguments.length?(e||vn("def.undefined",n),w(V[n])||(V[n]="eps"===n?b(P(10),z(-v)):Y(V[n]))):(e&&vn("def.already_set",{v:n,w:x.def(n)},!0),V[n]=y(t)),O(V[n]))}),ceil:!0,floor:!0,fact:!0,sqrt:!0,round:!0,sgn:!0,int:"intp",div_100:"div_100"},B={endBop:["bop","pc","fs"],uopVal:["num","name","uop","po"],fn:["po"]},nn={"|":[1,!0,"max"],"&":[2,!0,"min"],"+":[3,!0,"add"],"-":[3,!0,"sub"],"*":[4,!0,"mul"],"#":[4,!0,"mod"],"/":[4,!0,"div"],"^":[5,!1,"pow"],"%":[7,!0,"div_100"],"!":[7,!0,"fact"],inva:[6,!0,"inva"],fn:[7,!0]},tn={num:{rx:/^([0-9., ]+)\s*/,next:B.endBop},name:{rx:/^([A-Za-z_]\w*)\s*/},fn:{next:B.fn},vr:{next:B.endBop},bop:{rx:/^([-+*\/#^&|])\s*/,next:B.uopVal},uop:{rx:/^([-+])\s*/,next:B.uopVal},po:{rx:/^(\()\s*/,next:B.uopVal},pc:{rx:/^(\))\s*/,next:B.endBop},fs:{rx:/^([%!])\s*/,next:B.endBop}},rn=(x.calc=function(n,t){return y(n,null,!pn(t)||t)},x.check=function(n,t){try{var r,e=rn(n,!1,!0===t),i=[];for(r in e)dn(e,r)&&(i[e[r]]=r);return i}catch(n){return!1}},function(n,t,r){var e=String(n),i={size:0,vars:{}};pn(t)||(t={});for(var o,u,a,s,f={r0:F()};o=e.match(/{+/);)o=o[0],u=e.indexOf(o),a=e.indexOf(o.replace(/{/g,"}"),u),e=e.slice(0,u)+(-1===a?"":"\t"+e.slice(a+o.length));for(var l=e.split(";"),d=0;d<l.length;d++)for(e=l[d].replace(fn,""),f["r"+(d+1)]=f.r0=""===e?f.r0:en(e,t,f,i,r),s=0;s<=d;s++)f["r0"+(s+1)]=f["r"+(d-s+1)];return null===r?f.r0:i.vars}),en=function(n,t,r,e,i){for(var o,u,a,s,f=B.uopVal,l=[],d=[];""!==n;){for(a=null,v=0;v<f.length&&null===a;v++)o=f[v],a=n.match(tn[o].rx);switch(null!==a?(u=a[1],n=n.slice(a[0].length)):f!==B.endBop||n.match(tn.num.rx)?vn("calc.unexpected",n):(u="*",o="bop"),o){case"num":l.push(new x(u,!1));break;case"name":o="vr",dn(q,u)&&!1!==q[u]?(o="fn",d.push(nn.fn.concat([u]))):null!==i?dn(e.vars,u)||i&&(dn(r,u)||x.def(null,u))||(e.vars[u]=e.size++):dn(t,u)?(dn(e.vars,u)||(e.vars[u]=y(t[u])),l.push(new x(e.vars[u]))):dn(r,u)?l.push(new x(r[u])):x.def(null,u)?l.push(x.def(u)):vn("calc.undefined",u);break;case"fs":case"bop":for(var c=nn[u];void 0!==(s=d.pop());){if("("===s||s[0]<=c[0]-(c[1]?1:0)){d.push(s);break}l.push(s[2])}d.push(c);break;case"uop":"-"===u&&d.push(nn.inva);break;case"po":d.push(u);break;case"pc":for(;"("!==(s=d.pop());)void 0===s&&vn("calc.unexpected",")"),l.push(s[2])}f=tn[o].next}for(;void 0!==(s=d.pop());)"("===s&&vn("calc.unexpected","("),l.push(s[2]);if(f!==B.endBop&&vn("calc.unexpected","END"),null!==i)return null;for(var _,p=[],v=0;v<l.length;v++)w(_=l[v])?p.push(_):dn(q,_)?_n(q[_])&&-1!==(_=q[_]).indexOf("_")?(_=_.split("_"),p[p.length-1][_[0]](_[1],!0)):p[p.length-1][_](!0):p[p.length-2][_](p.pop(),!0);return p[0]};return x.prototype.toString=function(){return i(n,[this])},x.prototype.format=function(n){return i(o,[this,n],!0)},x.prototype.toNumber=function(){return i(Z,[this])},x.prototype.cmp=function(n,t){return i(E,[this,n,t])},x.prototype.eq=function(n,t){return i(C,[this,n,t])},x.prototype.isInt=function(){return i(s,[this])},x.prototype.set=function(n){return r(D,[this,n],!0)},x.prototype.add=function(n,t){return r(N,[this,n],t)},x.prototype.sub=function(n,t){return r(j,[this,n],t)},x.prototype.mul=function(n,t){return r(p,[this,n],t)},x.prototype.div=function(n,t){return r(g,[this,n],t)},x.prototype.mod=function(n,t){return r(K,[this,n],t)},x.prototype.floor=function(n){return r(u,[this],n)},x.prototype.round=function(n){return r(G,[this],n)},x.prototype.abs=function(n){return r(T,[this],n)},x.prototype.inva=function(n){return r(a,[this],n)},x.prototype.invm=function(n){return r(f,[this],n)},x.prototype.ceil=function(n){return r(l,[this],n)},x.prototype.intp=function(n){return r(H,[this],n)},x.prototype.min=function(n,t){return r(J,[this,n],t)},x.prototype.max=function(n,t){return r(Q,[this,n],t)},x.prototype.sqrt=function(n){return r(R,[this],n)},x.prototype.sgn=function(n){return r(U,[this],n)},x.prototype.pow=function(n,t){return r(b,[this,n],t)},x.prototype.fact=function(n){return r(W,[this],n)},x.prototype.split=function(n){return i(X,[this,n],!0)},x.prop=function(){return{MbnV:an,MbnP:v,MbnS:L,MbnT:c,MbnE:h,MbnF:A,MbnL:_}},x}var an="1.53.0",c={invalid_argument:"invalid argument: %v%",invalid_format:"invalid format: %v%",limit_exceeded:"value exceeded %v% digits limit",calc:{undefined:"undefined: %v%",unexpected:"unexpected: %v%"},cmp:{negative_diff:"negative maximal difference: %v%"},def:{undefined:"undefined constant: %v%",already_set:"constant already set: %v% = %w%",invalid_name:"invalid name for constant: %v%"},div:{zero_divisor:"division by zero"},extend:{invalid_precision:"invalid precision (non-negative integer): %v%",invalid_separator:"invalid separator (dot, comma): %v%",invalid_truncation:"invalid truncation (bool): %v%",invalid_evaluating:"invalid evaluating (bool, null): %v%",invalid_formatting:"invalid formatting (bool): %v%",invalid_limit:"invalid digit limit (positive int): %v%"},fact:{invalid_value:"factorial of invalid value (non-negative integer): %v%"},format:{_:"extend"},pow:{unsupported_exponent:"only integer exponents supported: %v%"},reduce:{invalid_function:"invalid function name: %v%",no_array:"no array given",invalid_argument_count:"two arguments can be used only with two-argument functions",different_lengths:"arrays have different lengths: %v%, %w%",different_keys:"arrays have different keys: [%v%], [%w%]"},split:{invalid_part_count:"only positive integer number of parts supported: %v%",zero_part_sum:"cannot split value when sum of parts is zero"},sqrt:{negative_value:"square root of negative value: %v%"}},_=null,sn=/^\s*(=)?[\s=]*([-+])?\s*((?:[\s\S]*\S)?)/,fn=/^[\s=]+/,ln=/^[A-Za-z_]\w*/,dn=function(n,t){return c.hasOwnProperty.call(n,t)},cn=function(n){return typeof n},_n=function(n){return"string"===cn(n)},pn=function(n){return"object"===cn(n)},s=function(n){return"number"===cn(n)},p=function(n){return"function"===cn(n)},v=function(n,t,r){this.errorKey=n,this.errorValues=t,this.message=r},h=function(n){if(on(n)){for(var t=[],r=0;r<n.length&&r<20;r++)t.push(on(n[r])?"[..]":e(n[r]));return"["+t.join()+"]"}return e(n)},vn=function(n,t,r){var e,i={},o="mbn."+n;if(1!==arguments.length)for(l in t=pn(t)&&!0===r?t:{v:t})dn(t,l)&&(e=h(t[l]),i[l]=20<e.length?e.slice(0,18)+"..":e);var u=null;if(p(_))try{u=_(o,i)}catch(n){}if(!_n(u)){for(var a=n.split("."),s=a.length,u="Mbn",f=(1<s&&(u+="."+a[0]),c),l=0;l<s;l++)var d=f[a[l]],f=d=pn(d)&&dn(d,"_")?f[d._]:d;u+=" error: "+f}for(l in i)dn(i,l)&&(u=u.replace("%"+l+"%",i[l]));throw new v(o,i,u)},t=(v.prototype.toString=function(){return this.message},v.translate=function(n){_=n},n());return t.extend=n,t.MbnErr=v,t}();"object"==typeof module&&(module.exports.default=module.exports=Mbn);
